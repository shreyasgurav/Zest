(()=>{var e={};e.id=4441,e.ids=[4441],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},82619:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=a(50482),r=a(69108),i=a(62563),n=a.n(i),l=a(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let c=["",{children:["create",{children:["event",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,66699)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/create/event/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,39258)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/create/event/page.tsx"],u="/create/event/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/create/event/page",pathname:"/create/event",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},49194:(e,t,a)=>{Promise.resolve().then(a.bind(a,27959))},27959:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(95344),r=a(3729),i=a(81012),n=a(87097),l=a(73424),o=a(14408),c=a(8428),d=a(59753),u=a(47827),m=a.n(u),p=a(36853),h=a(72171),g=a(49921);!function(){var e=Error("Cannot find module '@/components/StepIndicator/StepIndicator'");throw e.code="MODULE_NOT_FOUND",e}();let v=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivali","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Ranchi","Howrah","Coimbatore","Jabalpur","Gwalior","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubli-Dharwad","Mysore","Tiruchirappalli","Bareilly","Aligarh","Tiruppur","Gurgaon","Moradabad","Jalandhar","Bhubaneswar","Salem","Warangal","Guntur","Noida","Dehradun","Kochi"],x=[{id:"music",label:"Music"},{id:"comedy",label:"Comedy"},{id:"clubbing",label:"Clubbing"},{id:"party",label:"Party"},{id:"art",label:"Art"},{id:"adventure",label:"Adventure"},{id:"sports",label:"Sports"}],_=[{id:"duration",label:"Duration",placeholder:"e.g., 2 hours"},{id:"age_requirement",label:"Age Requirement",placeholder:"e.g., 16+ years"},{id:"language",label:"Language",placeholder:"e.g., Hindi, English"},{id:"seating",label:"Seating Arrangement",placeholder:"e.g., Theater, Round Table"},{id:"kid_friendly",label:"Kid Friendly",placeholder:"e.g., Yes/No or details"},{id:"pet_friendly",label:"Pet Friendly",placeholder:"e.g., Yes/No or details"},{id:"wheelchair",label:"Wheelchair Accessible",placeholder:"e.g., Yes/No or details"},{id:"parking",label:"Parking Available",placeholder:"e.g., Yes/No or details"},{id:"food",label:"Food & Beverages",placeholder:"e.g., Snacks, Dinner, Drinks"},{id:"outdoor",label:"Outdoor Event",placeholder:"e.g., Yes/No or details"},{id:"indoor",label:"Indoor Event",placeholder:"e.g., Yes/No or details"},{id:"dress_code",label:"Dress Code",placeholder:"e.g., Formal, Casual"},{id:"photography",label:"Photography Allowed?",placeholder:"e.g., Yes/No or details"},{id:"alcohol",label:"Alcohol allowed?",placeholder:"e.g., Yes/No or details"}],b=()=>{let e=(0,c.useRouter)(),t=(0,c.useSearchParams)(),[a,u]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!0),[C,j]=(0,r.useState)(""),[f,N]=(0,r.useState)(""),[E,w]=(0,r.useState)(""),[D,S]=(0,r.useState)(""),[I,k]=(0,r.useState)(!1),[T,P]=(0,r.useState)(""),[U,A]=(0,r.useState)(""),[B,L]=(0,r.useState)(""),[q,G]=(0,r.useState)(1),[M,R]=(0,r.useState)(null),[F,O]=(0,r.useState)(!1),[$,z]=(0,r.useState)(null),[Y,J]=(0,r.useState)(null),[V,H]=(0,r.useState)([]),[K,Q]=(0,r.useState)(""),[Z,W]=(0,r.useState)([{id:"1",date:"",startTime:"",endTime:"",tickets:[{name:"",capacity:"",price:""}]}]),[X,ee]=(0,r.useState)([{date:"",startTime:"",endTime:""}]),[et,ea]=(0,r.useState)([{name:"",capacity:"",price:""}]),[es,er]=(0,r.useState)(!1),[ei,en]=(0,r.useState)(""),[el,eo]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eu,em]=(0,r.useState)(!1),[ep,eh]=(0,r.useState)({}),[eg,ev]=(0,r.useState)("Mumbai"),ex=(0,o.v0)(),e_=()=>f.trim()?0===V.length?(P("Please select at least one event category"),!1):E.trim()?D.trim()?(P(""),!0):(P("Please provide a description for your event"),!1):(P("Please enter a venue location"),!1):(P("Please enter an event name"),!1);(0,r.useEffect)(()=>{if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log("Google Maps script already exists in DOM");let e=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.places&&(eo(!0),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),el||(console.error("Google Maps failed to load after timeout"),em(!0))},1e4)}},[]),(0,r.useEffect)(()=>{let e=async e=>{if(!e){j("Please sign in to create events"),u(!1),y(!1);return}try{let a=t?.get("from"),s=t?.get("pageId"),r=t?.get("name");t?.get("username");let i=await (0,d.getUserOwnedPages)(e.uid);if(a&&s){let e=!1;if("organisation"===a||"organization"===a?e=i.organizations.some(e=>e.uid===s):"artist"===a?e=i.artists.some(e=>e.uid===s):"venue"===a&&(e=i.venues.some(e=>e.uid===s)),!e){j(`You don't have permission to create events as ${r}. Please ensure you own this ${a} page.`),u(!1),y(!1);return}}else if(!(i.artists.length>0||i.organizations.length>0||i.venues.length>0)){j("You need to create at least one page (Artist, Organization, or Venue) before you can create events."),u(!1),y(!1);return}u(!0),y(!1)}catch(e){console.error("Error checking authorization:",e),j("Error verifying your permissions. Please try again."),u(!1),y(!1)}},a=(0,o.Aj)(ex,e);return()=>a()},[t]),(0,r.useEffect)(()=>{(async()=>{if(ex.currentUser)try{let e=t?.get("from"),a=t?.get("pageId"),s=t?.get("name"),r=t?.get("username");if(e&&a&&s&&r){let t="";try{let s="";if("organisation"===e||"organization"===e?s="Organisations":"artist"===e?s="Artists":"venue"===e&&(s="Venues"),s){let e=await (0,n.QT)((0,n.JU)(i.db,s,a));if(e.exists()){let a=e.data();t=a.profileImage||a.profile_image||""}}}catch(e){console.log("Could not fetch profile image:",e)}R({type:e,pageId:a,name:decodeURIComponent(s),username:decodeURIComponent(r),profileImage:t}),A(decodeURIComponent(s)),L(decodeURIComponent(r)),O(!1)}else{let e=await (0,n.QT)((0,n.JU)(i.db,"Organisations",ex.currentUser.uid));if(e.exists()){let t=e.data();A(t.name||""),L(t.username||""),R({type:"organisation",pageId:ex.currentUser.uid,name:t.name||"",username:t.username||"",profileImage:t.profileImage||t.profile_image||""}),localStorage.setItem("orgName",t.name||""),localStorage.setItem("orgUsername",t.username||""),O(!1)}}}catch(e){console.error("Error fetching creator details:",e)}})()},[t]);let eb=e=>{if(1===Z.length){P("You must have at least one session");return}W(Z.filter(t=>t.id!==e))},ey=(e,t,a)=>{W(Z.map(s=>s.id===e?{...s,[t]:a}:s))},eC=e=>{W(Z.map(t=>t.id===e?{...t,tickets:[...t.tickets,{name:"",capacity:"",price:""}]}:t))},ej=(e,t)=>{W(Z.map(a=>a.id===e?{...a,tickets:a.tickets.filter((e,a)=>a!==t)}:a))},ef=(e,t,a,s)=>{W(Z.map(r=>r.id===e?{...r,tickets:r.tickets.map((e,r)=>r===t?{...e,[a]:s}:e)}:r))},eN=()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return Z.every(a=>{if(!a.date||!a.startTime||!a.endTime)return!1;let s=new Date(a.date),r=new Date(`${a.date} ${a.startTime}`),i=new Date(`${a.date} ${a.endTime}`);return!(s<t)&&!(i<=r)&&(s.getTime()!==t.getTime()||!(r<e))&&0!==a.tickets.length&&a.tickets.every(e=>e.name.trim()&&e.capacity&&e.price&&parseInt(e.capacity)>0&&parseFloat(e.price)>=0)})},eE=e=>{ea(et.filter((t,a)=>a!==e))},ew=(e,t,a)=>{let s=[...et];s[e][t]=a,ea(s)},eD=()=>et.every(e=>e.name&&e.capacity&&e.price&&parseInt(e.capacity)>0&&parseFloat(e.price)>=0),eS=e=>{ee(X.filter((t,a)=>a!==e))},eI=(e,t,a)=>{let s=[...X];s[e][t]=a,ee(s)},ek=()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return X.every(a=>{if(!a.date||!a.startTime||!a.endTime)return!1;let s=new Date(a.date),r=new Date(`${a.date} ${a.startTime}`),i=new Date(`${a.date} ${a.endTime}`);return!(s<t)&&!(i<=r)&&(s.getTime()!==t.getTime()||!(r<e))})},eT=async e=>{if(!e)return null;try{if(e.size>5242880)throw Error("Image size should be less than 5MB");if(!e.type.startsWith("image/"))throw Error("File must be an image");let t=e.name.split(".").pop(),a=`events/${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`,s=(0,l.iH)(i.tO,a),r={contentType:e.type,customMetadata:{uploadedBy:ex.currentUser?.uid||"unknown",uploadTime:new Date().toISOString()}},n=new Blob([await e.arrayBuffer()],{type:e.type}),o=0;for(;o<3;)try{console.log(`Attempt ${o+1} to upload image...`);let e=await (0,l.KV)(s,n,r);console.log("Upload successful:",e);let t=await (0,l.Jt)(e.ref);return console.log("Download URL obtained:",t),t}catch(e){if(console.error(`Upload attempt ${o+1} failed:`,e),2===o)throw Error(`Image upload failed after 3 attempts: ${e.message}`);await new Promise(e=>setTimeout(e,1e3*Math.pow(2,o))),o++}throw Error("Upload failed after all retry attempts")}catch(e){throw console.error("Error in uploadImage:",e),Error(`Image upload failed: ${e.message}`)}},eP=e=>{H(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},eU=e=>{eh(t=>e in t?Object.fromEntries(Object.entries(t).filter(([t])=>t!==e)):{...t,[e]:""})},eA=(e,t)=>{eh(a=>({...a,[e]:t}))},eB=(e,t)=>{let a=(0,n.Bt)(),s=ex.currentUser,r=(e,t)=>new Date(`${e}T${t}:00`).toISOString(),i=es?X.map((e,t)=>{let a=et.map(e=>({name:e.name.trim(),price:parseFloat(e.price),capacity:parseInt(e.capacity),available_capacity:parseInt(e.capacity)}));return{sessionId:`session_${String(t+1).padStart(3,"0")}`,title:1===X.length?"Main Event":`Session ${t+1}`,start_time:r(e.date,e.startTime),end_time:r(e.date,e.endTime),tickets:a}}):Z.map((e,t)=>{let a=e.tickets.map(e=>({name:e.name.trim(),price:parseFloat(e.price),capacity:parseInt(e.capacity),available_capacity:parseInt(e.capacity)}));return{sessionId:e.id,title:`Session ${t+1}`,start_time:r(e.date,e.startTime),end_time:r(e.date,e.endTime),tickets:a}});return{title:f.trim(),about_event:D.trim(),event_type:"event",event_venue:E.trim(),event_image:e,event_categories:V,event_languages:K.trim(),event_guides:ep,creator:M?{type:M.type,pageId:M.pageId,name:M.name,username:M.username,userId:s.uid}:{type:"organisation",pageId:s.uid,name:U,username:B,userId:s.uid},sessions:i,organizationId:s.uid,hosting_club:U,organization_username:B,status:"active",createdAt:a,updatedAt:a,image_upload_status:t?"failed":e?"success":"none"}},eL=async t=>{if(t.preventDefault(),!ex.currentUser){P("Please sign in to create an event");return}if(!f.trim()){P("Please enter an event name");return}if(!E.trim()){P("Please enter a venue location");return}if(0===V.length){P("Please select at least one event category");return}if(es){if(!eD()){P("Please ensure all ticket types have valid names, capacities (greater than 0), and prices (0 or greater)");return}if(!ek()){P("Please ensure all time slots have valid dates (not in the past), start times, and end times (end time must be after start time)");return}}else if(!eN()){P("Please ensure all sessions have valid details: date, time slots, and at least one ticket type with valid capacity and pricing");return}if(!D.trim()){P("Please provide a description for your event");return}k(!0),P("");try{let t=null,a=!1,s="";if($)try{console.log("Starting image upload process..."),t=await eT($),console.log("Image upload completed successfully:",t)}catch(e){console.error("Image upload failed:",e),a=!0,s="Image upload failed. The event will be created without an image. You can add an image later by editing the event."}let r=eB(t,a);console.log("‚úÖ Creating NEW event:",{title:r.title,sessions:r.sessions.length,event_venue:r.event_venue,event_image:t?"URL present":"No image",image_upload_status:r.image_upload_status});let l=(0,n.hJ)(i.db,"events"),o=await (0,n.ET)(l,r);console.log("Event created with ID:",o.id),a?P(`Event created successfully! Note: ${s} You can try uploading the image again later.`):P("Event created successfully!"),setTimeout(()=>{e.push("/"),e.refresh()},2e3)}catch(e){console.error("Error creating event:",e),P(`Failed to create event: ${e.message}`)}finally{k(!1)}};return b?s.jsx("div",{className:m().createEventPage,children:s.jsx("div",{className:m().createEventContainer,children:s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",color:"#aeadad"},children:"Verifying permissions..."})})}):a?s.jsx("div",{className:m().createEventPage,children:(0,s.jsxs)("div",{className:m().createEventContainer,children:[s.jsx("div",{className:m().headerRow,children:s.jsx(Object(function(){var e=Error("Cannot find module '@/components/StepIndicator/StepIndicator'");throw e.code="MODULE_NOT_FOUND",e}()),{steps:[{id:1,title:"Event Details",description:"Basic information about your event"},{id:2,title:"Event Structure",description:"Sessions, tickets, and scheduling"}],currentStep:q})}),(0,s.jsxs)("form",{onSubmit:eL,className:m().createEventForm,children:[(0,s.jsxs)("div",{className:m().slideContainer,children:[1===q&&s.jsx("div",{className:m().slide,children:(0,s.jsxs)("div",{className:m().slideContent,children:[(0,s.jsxs)("div",{className:m().leftSection,children:[s.jsx("div",{className:m().eventCover,children:(0,s.jsxs)("div",{className:m().coverImageContainer,children:[Y?s.jsx("img",{src:Y,alt:"Event Cover",className:m().coverImagePreview}):s.jsx("div",{className:m().gradientPlaceholder}),(0,s.jsxs)("label",{htmlFor:"event-image-upload",className:m().uploadButton,children:[s.jsx("span",{className:m().cameraIcon,children:"\uD83D\uDCF7"}),s.jsx("input",{id:"event-image-upload",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880){P("Image size should be less than 5MB");return}z(t),J(URL.createObjectURL(t))}},className:m().fileInput})]})]})}),s.jsx("p",{className:m().imageTip,children:"Click to upload event cover image (max 5MB)"})]}),s.jsx("div",{className:m().rightSection,children:(0,s.jsxs)("form",{className:m().eventDetailsForm,children:[s.jsx("div",{className:m().eventTitleSection,children:s.jsx("input",{type:"text",value:f,onChange:e=>N(e.target.value),placeholder:"Event Name",className:m().eventTitleInput,required:!0})}),(0,s.jsxs)("div",{className:m().categoriesSection,children:[s.jsx("h4",{className:m().sectionLabel,children:"\uD83D\uDCCB Event Categories"}),s.jsx("div",{className:m().categoriesGrid,children:x.map(e=>s.jsx("button",{type:"button",className:`${m().categoryTag} ${V.includes(e.id)?m().categoryTagActive:""}`,onClick:()=>eP(e.id),children:e.label},e.id))}),0===V.length&&s.jsx("p",{className:m().errorText,children:"Please select at least one category"})]}),(0,s.jsxs)("div",{className:m().locationSection,children:[s.jsx("h4",{className:m().sectionLabel,children:"\uD83D\uDCCD Event Location"}),(0,s.jsxs)("div",{className:m().locationInputGroup,children:[s.jsx("input",{type:"text",value:eg,onChange:e=>ev(e.target.value),placeholder:"City (e.g., Mumbai, Delhi)",className:m().cityInputCompact,list:"cities-list"}),s.jsx("datalist",{id:"cities-list",children:v.map(e=>s.jsx("option",{value:e},e))})]}),(0,s.jsxs)("div",{className:m().venueInputGroup,children:[!el&&!eu&&s.jsx(h.default,{src:`https://maps.googleapis.com/maps/api/js?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}&libraries=places`,strategy:"afterInteractive",onLoad:()=>{eo(!0),em(!1)},onError:()=>{em(!0),eo(!1)}}),el?s.jsx(p.ZP,{value:ei,onChange:en,onSelect:e=>{en(e),w(e);let t=e.split(",");if(t.length>=2)for(let e=t.length-3;e>=0;e--){let a=t[e].trim();if(a&&!/^\d+$/.test(a)&&a.length>2){let e=v.find(e=>e.toLowerCase().includes(a.toLowerCase())||a.toLowerCase().includes(e.toLowerCase()));if(e){ev(e);break}ev(a);break}}ed(!1)},children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:i,loading:n}=e;return(0,s.jsxs)("div",{style:{position:"relative"},children:[s.jsx("input",{...t({placeholder:"Venue address...",className:m().venueInputCompact,required:!0,onFocus:()=>ed(!0),onBlur:()=>setTimeout(()=>ed(!1),150)})}),ec&&a.length>0&&(0,s.jsxs)("div",{className:m().autocompleteDropdown,children:[n&&s.jsx("div",{className:m().suggestionItem,children:"Loading..."}),a.map(e=>{let t=e.active?m().suggestionItemActive:m().suggestionItem,a=e.structured_formatting?.main_text||e.description,n=e.structured_formatting?.secondary_text;return(0,r.createElement)("div",{...i(e,{className:t}),key:e.placeId,children:[s.jsx("span",{className:m().locationIcon,children:s.jsx(g.Nh4,{})}),(0,s.jsxs)("span",{children:[s.jsx("span",{className:m().suggestionMain,children:a}),n&&s.jsx("div",{className:m().suggestionSecondary,children:n})]})]})})]})]})}}):s.jsx("input",{type:"text",value:ei,onChange:e=>{en(e.target.value),w(e.target.value)},placeholder:"Venue address...",className:m().venueInputCompact,required:!0})]})]}),(0,s.jsxs)("div",{className:m().aboutSection,children:[s.jsx("h4",{className:m().sectionLabel,children:"\uD83D\uDCDD About Event"}),s.jsx("textarea",{value:D,onChange:e=>S(e.target.value),placeholder:"Tell people what your event is about...",className:m().aboutTextarea,rows:4,required:!0})]}),(0,s.jsxs)("div",{className:m().guidesSection,children:[s.jsx("h4",{className:m().sectionLabel,children:"\uD83D\uDCD6 Event Information"}),s.jsx("div",{className:m().guidesCompactGrid,children:_.slice(0,6).map(e=>(0,s.jsxs)("div",{className:m().guideRowCompact,children:[(0,s.jsxs)("label",{className:m().guideCheckboxCompact,children:[s.jsx("input",{type:"checkbox",checked:e.id in ep,onChange:()=>eU(e.id)}),s.jsx("span",{className:m().checkboxLabel,children:e.label})]}),e.id in ep&&s.jsx("input",{type:"text",className:m().guideInputCompact,placeholder:e.placeholder,value:ep[e.id],onChange:t=>eA(e.id,t.target.value)})]},e.id))}),_.length>6&&(0,s.jsxs)("details",{className:m().moreGuides,children:[s.jsx("summary",{className:m().moreGuidesToggle,children:"Show more options"}),s.jsx("div",{className:m().guidesCompactGrid,children:_.slice(6).map(e=>(0,s.jsxs)("div",{className:m().guideRowCompact,children:[(0,s.jsxs)("label",{className:m().guideCheckboxCompact,children:[s.jsx("input",{type:"checkbox",checked:e.id in ep,onChange:()=>eU(e.id)}),s.jsx("span",{className:m().checkboxLabel,children:e.label})]}),e.id in ep&&s.jsx("input",{type:"text",className:m().guideInputCompact,placeholder:e.placeholder,value:ep[e.id],onChange:t=>eA(e.id,t.target.value)})]},e.id))})]})]})]})})]})}),2===q&&(0,s.jsxs)("div",{className:m().slide,children:[s.jsx("div",{className:m().formSection,children:(0,s.jsxs)("div",{className:m().modeToggleContainer,children:[s.jsx("h3",{children:"Choose Event Type"}),(0,s.jsxs)("div",{className:m().modeToggle,children:[(0,s.jsxs)("label",{className:m().toggleLabel,children:[s.jsx("input",{type:"checkbox",checked:!es,onChange:()=>{if(er(!es),es){if(X.length>0&&et.length>0){let e=X[0];W([{id:"1",date:e.date,startTime:e.startTime,endTime:e.endTime,tickets:et.map(e=>({...e}))}])}}else if(Z.length>0){let e=Z[0];ee([{date:e.date,startTime:e.startTime,endTime:e.endTime}]),ea(e.tickets.map(e=>({...e})))}},className:m().toggleInput}),s.jsx("span",{className:m().toggleSlider}),s.jsx("span",{className:m().toggleText,children:es?"Simple Mode (Legacy)":"Session-Centric Mode (Recommended)"})]}),s.jsx("div",{className:m().modeDescription,children:es?s.jsx("p",{children:"Simple mode: One set of tickets applies to all time slots. Good for basic events."}):s.jsx("p",{children:"Session-centric mode: Each session can have its own tickets, pricing, and capacity. Perfect for multi-day events, workshops, or concerts with different pricing tiers."})})]})]})}),es?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:m().formSection,children:[s.jsx("h3",{children:"Create Tickets"}),et.map((e,t)=>s.jsx("div",{className:m().ticketSlot,children:(0,s.jsxs)("div",{className:m().formRow,children:[(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Ticket Name"}),s.jsx("input",{type:"text",value:e.name,onChange:e=>ew(t,"name",e.target.value),placeholder:"e.g., General, VIP, Fan Pit",required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Capacity"}),s.jsx("input",{type:"number",value:e.capacity,onChange:e=>ew(t,"capacity",e.target.value),placeholder:"Number of tickets",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Price (‚Çπ)"}),s.jsx("input",{type:"number",value:e.price,onChange:e=>ew(t,"price",e.target.value),placeholder:"Ticket price",min:"0",step:"0.01",required:!0})]}),et.length>1&&s.jsx("button",{type:"button",className:m().removeDateButton,onClick:()=>eE(t),children:"Remove"})]})},t)),s.jsx("button",{type:"button",className:m().addDateButton,onClick:()=>{ea([...et,{name:"",capacity:"",price:""}])},children:"Add Another Ticket Type"})]}),(0,s.jsxs)("div",{className:m().formSection,children:[s.jsx("h3",{children:"Event Schedule"}),X.map((e,t)=>(0,s.jsxs)("div",{className:m().scheduleSlotContainer,children:[(0,s.jsxs)("div",{className:m().scheduleRow,children:[(0,s.jsxs)("div",{className:m().scheduleIndicatorCol,children:[s.jsx("span",{className:m().scheduleCircleFilled}),s.jsx("span",{className:m().scheduleDashedLine}),s.jsx("span",{className:m().scheduleCircle})]}),(0,s.jsxs)("div",{className:m().scheduleLabelsCol,children:[s.jsx("span",{className:m().scheduleLabel,children:"Start"}),s.jsx("span",{className:m().scheduleLabel,children:"End"})]}),(0,s.jsxs)("div",{className:m().schedulePickersCol,children:[(0,s.jsxs)("div",{className:m().schedulePickerRow,children:[s.jsx("input",{type:"date",value:e.date,onChange:e=>eI(t,"date",e.target.value),className:m().scheduleDateInput,required:!0}),s.jsx("input",{type:"time",value:e.startTime,onChange:e=>eI(t,"startTime",e.target.value),className:m().scheduleTimeInput,required:!0})]}),(0,s.jsxs)("div",{className:m().schedulePickerRow,children:[s.jsx("input",{type:"date",value:e.date,onChange:e=>eI(t,"date",e.target.value),className:m().scheduleDateInput,required:!0,disabled:!0}),s.jsx("input",{type:"time",value:e.endTime,onChange:e=>eI(t,"endTime",e.target.value),className:m().scheduleTimeInput,required:!0})]})]})]}),X.length>1&&s.jsx("button",{type:"button",className:m().removeDateButton,onClick:()=>eS(t),children:"Remove"})]},t)),s.jsx("button",{type:"button",className:m().addDateButton,onClick:()=>{ee([...X,{date:"",startTime:"",endTime:""}])},children:"Add Another Time Slot"})]})]}):s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:m().formSection,children:[s.jsx("h3",{children:"Event Sessions"}),(0,s.jsxs)("div",{className:m().sessionsBuilder,children:[Z.map((e,t)=>(0,s.jsxs)("div",{className:m().sessionCard,children:[(0,s.jsxs)("div",{className:m().sessionHeader,children:[(0,s.jsxs)("h4",{children:["Session ",t+1]}),Z.length>1&&s.jsx("button",{type:"button",className:m().removeSessionButton,onClick:()=>eb(e.id),children:"Remove Session"})]}),(0,s.jsxs)("div",{className:m().sessionTiming,children:[(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Date"}),s.jsx("input",{type:"date",value:e.date,onChange:t=>ey(e.id,"date",t.target.value),required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Start Time"}),s.jsx("input",{type:"time",value:e.startTime,onChange:t=>ey(e.id,"startTime",t.target.value),required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"End Time"}),s.jsx("input",{type:"time",value:e.endTime,onChange:t=>ey(e.id,"endTime",t.target.value),required:!0})]})]}),(0,s.jsxs)("div",{className:m().sessionTickets,children:[s.jsx("h5",{children:"Session Tickets"}),e.tickets.map((t,a)=>(0,s.jsxs)("div",{className:m().ticketRow,children:[(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Ticket Name"}),s.jsx("input",{type:"text",value:t.name,onChange:t=>ef(e.id,a,"name",t.target.value),placeholder:"e.g., General, VIP, Student",required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Capacity"}),s.jsx("input",{type:"number",value:t.capacity,onChange:t=>ef(e.id,a,"capacity",t.target.value),placeholder:"Number",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:m().formGroup,children:[s.jsx("label",{children:"Price (‚Çπ)"}),s.jsx("input",{type:"number",value:t.price,onChange:t=>ef(e.id,a,"price",t.target.value),placeholder:"Price",min:"0",step:"0.01",required:!0})]}),e.tickets.length>1&&s.jsx("button",{type:"button",className:m().removeTicketButton,onClick:()=>ej(e.id,a),children:"Remove"})]},a)),s.jsx("button",{type:"button",className:m().addTicketButton,onClick:()=>eC(e.id),children:"Add Ticket Type"})]})]},e.id)),s.jsx("button",{type:"button",className:m().addSessionButton,onClick:()=>{W([...Z,{id:Date.now().toString(),date:"",startTime:"",endTime:"",tickets:[{name:"",capacity:"",price:""}]}])},children:"Add Another Session"})]})]})})]})]}),T&&s.jsx("div",{className:`${m().message} ${T.includes("success")?m().success:m().error}`,children:T}),(0,s.jsxs)("div",{className:m().slideNavigation,children:[q>1&&s.jsx("button",{type:"button",className:m().prevButton,onClick:()=>{q>1&&G(q-1)},disabled:I,children:"‚Üê Previous"}),q<2?s.jsx("button",{type:"button",className:m().nextButton,onClick:()=>{q<2&&(1!==q||e_())&&G(q+1)},disabled:I,children:"Next ‚Üí"}):s.jsx("button",{type:"submit",className:m().submitButton,disabled:I,children:I?"Creating Event...":"Create Event"}),s.jsx("button",{type:"button",className:m().cancelButton,onClick:()=>e.push("/"),disabled:I,children:"Cancel"})]})]})]})}):s.jsx("div",{className:m().createEventPage,children:s.jsx("div",{className:m().unauthorizedMessageContainer,children:(0,s.jsxs)("div",{className:m().unauthorizedMessage,children:[s.jsx("h1",{children:"Access Denied"}),s.jsx("p",{children:C}),s.jsx("button",{onClick:()=>e.push("/business"),className:m().backButton,children:"Create Your First Page"})]})})})}},59753:(e,t,a)=>{"use strict";a.d(t,{dt:()=>o});var s=a(87097),r=a(81012);async function i(e,t){try{let a,i;if("email"===t||"google"===t){if(!e.email)return null;i=e.email.toLowerCase(),a=(0,s.IO)((0,s.hJ)(r.db,"Users"),(0,s.ar)("email","==",i))}else{if("phone"!==t||!e.phoneNumber)return null;i=e.phoneNumber,a=(0,s.IO)((0,s.hJ)(r.db,"Users"),(0,s.ar)("phone","==",i))}let n=await (0,s.PL)(a);if(!n.empty){let a=n.docs[0],i=a.data(),l=a.id;if(l===e.uid){let a={...i,providers:{...i.providers||{},[t]:!0},updatedAt:new Date().toISOString()};return await (0,s.pl)((0,s.JU)(r.db,"Users",e.uid),a,{merge:!0}),a}let o={...i,email:e.email?.toLowerCase()||i.email,phone:e.phoneNumber||i.phone,photo:e.photoURL||i.photo,name:e.displayName||i.name,providers:{...i.providers||{},[t]:!0},updatedAt:new Date().toISOString()};return await (0,s.pl)((0,s.JU)(r.db,"Users",l),o,{merge:!0}),l!==e.uid&&await (0,s.pl)((0,s.JU)(r.db,"Users",e.uid),{...o,uid:e.uid}),o}return null}catch(e){return console.error("Error linking accounts:",e),null}}async function n(e,t,a={}){let i={uid:e.uid,email:e.email?.toLowerCase()||a.email,phone:e.phoneNumber||a.phone,name:e.displayName||a.name||"",photo:e.photoURL||a.photo,username:a.username||"",bio:a.bio||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),providers:{[t]:!0}};return await (0,s.pl)((0,s.JU)(r.db,"Users",e.uid),i),i}async function l(e,t,a={}){try{let i=(0,s.JU)(r.db,"Users",e),n=await (0,s.QT)(i);if(!n.exists())return null;let l=n.data(),o={...l,...a,providers:{...l.providers||{},[t]:!0},updatedAt:new Date().toISOString()};return await (0,s.pl)(i,o,{merge:!0}),o}catch(e){return console.error("Error updating user providers:",e),null}}async function o(e,t,a={}){try{console.log(`üîµ Starting authentication flow for ${t} provider`,{uid:e.uid,email:e.email,displayName:e.displayName,phoneNumber:e.phoneNumber}),console.log("\uD83D\uDD35 Checking for existing accounts to link...");let o=await i(e,t);if(o){console.log("\uD83D\uDFE2 Account linking successful!",{linkedProviders:Object.keys(o.providers||{}),hasUsername:!!o.username});let e=o.username?"/profile":"/";return{userData:o,navigationPath:e}}if(console.log("\uD83D\uDD35 No existing accounts found to link, checking for existing user document..."),!(await (0,s.QT)((0,s.JU)(r.db,"Users",e.uid))).exists())return console.log("\uD83D\uDD35 Creating new user document..."),o=await n(e,t,a),console.log("\uD83D\uDFE2 New user document created successfully!",{uid:o.uid,email:o.email,phone:o.phone,name:o.name,providers:Object.keys(o.providers||{})}),{userData:o,navigationPath:"/"};{if(console.log("\uD83D\uDD35 User document exists, updating providers..."),!(o=await l(e.uid,t,a)))throw Error("Failed to update user providers");console.log("\uD83D\uDFE2 User providers updated successfully!",{providers:Object.keys(o.providers||{}),hasUsername:!!o.username});let s=o.username?"/profile":"/";return{userData:o,navigationPath:s}}}catch(s){throw console.error("\uD83D\uDD34 Error in authentication flow:",s),console.error("\uD83D\uDD34 Error details:",{message:s instanceof Error?s.message:"Unknown error",stack:s instanceof Error?s.stack:void 0,user:{uid:e.uid,email:e.email,displayName:e.displayName},provider:t,additionalData:a}),s}}},47827:e=>{e.exports={createEventPage:"CreateEvent_createEventPage__9Dgfa",createEventContainer:"CreateEvent_createEventContainer__b94_R",pageTitle:"CreateEvent_pageTitle__Wrl8r",createEventForm:"CreateEvent_createEventForm__FedMT",formGrid:"CreateEvent_formGrid__yRSOn",formSection:"CreateEvent_formSection__QS5VM",formGroup:"CreateEvent_formGroup__44_v_",categoriesGrid:"CreateEvent_categoriesGrid__iTV9P",categoryButton:"CreateEvent_categoryButton__H6z8Y",categoryButtonActive:"CreateEvent_categoryButtonActive__Zgjo0",errorText:"CreateEvent_errorText__Mpufb",imageSection:"CreateEvent_imageSection__cqBho",imageTip:"CreateEvent_imageTip__AQOEL",imageUploadBox:"CreateEvent_imageUploadBox__jNM6R",imageUploadLabel:"CreateEvent_imageUploadLabel__SNGuC",imagePreview:"CreateEvent_imagePreview__aEItI",imagePreviewImg:"CreateEvent_imagePreviewImg__8YcY2",fileInput:"CreateEvent_fileInput__G083d",formRow:"CreateEvent_formRow__D0YHa",dateSlot:"CreateEvent_dateSlot__tQI14",ticketSlot:"CreateEvent_ticketSlot__XL9Iz",removeDateButton:"CreateEvent_removeDateButton__IT3Qh",addDateButton:"CreateEvent_addDateButton__mL0Vj",formActions:"CreateEvent_formActions__X0qRJ",submitButton:"CreateEvent_submitButton__7Rx0o",cancelButton:"CreateEvent_cancelButton__4sJOI",message:"CreateEvent_message__f3V8N",success:"CreateEvent_success__VBJwB",error:"CreateEvent_error__knLzp",unauthorizedMessageContainer:"CreateEvent_unauthorizedMessageContainer__4bFjs",unauthorizedMessage:"CreateEvent_unauthorizedMessage__pS_Z9",backButton:"CreateEvent_backButton__ttEYE",scheduleSlotContainer:"CreateEvent_scheduleSlotContainer__kzIa_",scheduleRow:"CreateEvent_scheduleRow__dZ2yF",scheduleIndicatorCol:"CreateEvent_scheduleIndicatorCol__WwRlx",scheduleCircleFilled:"CreateEvent_scheduleCircleFilled__EGsHm",scheduleDashedLine:"CreateEvent_scheduleDashedLine__Gc_N4",scheduleCircle:"CreateEvent_scheduleCircle__y7LJh",scheduleLabelsCol:"CreateEvent_scheduleLabelsCol__QvK8R",scheduleLabel:"CreateEvent_scheduleLabel__beW37",schedulePickersCol:"CreateEvent_schedulePickersCol__T7EdC",schedulePickerRow:"CreateEvent_schedulePickerRow__Pzv4G",scheduleDateInput:"CreateEvent_scheduleDateInput__tkSiT",scheduleTimeInput:"CreateEvent_scheduleTimeInput__hYXbw",locationInput:"CreateEvent_locationInput__G4Aig",autocompleteDropdown:"CreateEvent_autocompleteDropdown__gnF0n",suggestionItem:"CreateEvent_suggestionItem__TnmDI",suggestionItemActive:"CreateEvent_suggestionItemActive__yZ3_f",suggestionMain:"CreateEvent_suggestionMain__bxjvB",suggestionSecondary:"CreateEvent_suggestionSecondary__p_J7T",locationIcon:"CreateEvent_locationIcon__9SQNM",guidesGrid:"CreateEvent_guidesGrid__KpG5E",guideRow:"CreateEvent_guideRow___ImMi",guideCheckboxLabel:"CreateEvent_guideCheckboxLabel__budMw",guideInput:"CreateEvent_guideInput__delZl"}},66699:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>n});let s=(0,a(86843).createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/create/event/page.tsx`),{__esModule:r,$$typeof:i}=s,n=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,4292,9314,4684],()=>a(82619));module.exports=s})();