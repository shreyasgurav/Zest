(()=>{var e={};e.id=1931,e.ids=[1931],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},7317:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>o.a,__next_app__:()=>_,originalPathname:()=>v,pages:()=>d,routeModule:()=>m,tree:()=>r});var s=i(50482),a=i(69108),n=i(62563),o=i.n(n),c=i(68300),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);i.d(t,l);let r=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,95703)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,39258)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/page.tsx"],v="/page",_={require:i,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:r}})},15744:(e,t,i)=>{Promise.resolve().then(i.bind(i,55624)),Promise.resolve().then(i.bind(i,56743))},22137:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});let s=(0,i(97075).Z)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},6058:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});let s=(0,i(97075).Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},38271:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});let s=(0,i(97075).Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},89895:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});let s=(0,i(97075).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},46929:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var s=i(95344),a=i(3729),n=i(8428),o=i(14408),c=i(81012),l=i(87097),r=i(38271),d=i(55794);let v=(0,i(97075).Z)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var _=i(80508),m=i(34087),u=i(89895),x=i(36687),y=i.n(x);function g({activity:e,onDelete:t}){var i;let x=(0,n.useRouter)(),g=(0,o.v0)().currentUser,h=g&&g.uid===e?.organizationId,[p,j]=(0,a.useState)(!1),[S,N]=(0,a.useState)(!1),k=e.name||e.activityName||"Untitled Activity",f=e.location||e.activityLocation||"Location TBA",B=e.about_activity||e.aboutActivity||"",b=e.activity_categories||(e.activity_category?[e.activity_category]:[]),A=(()=>{let t=new Date().toLocaleDateString("en-US",{weekday:"long"}),i=e.weekly_schedule?.find(e=>e.day===t&&e.is_open);if(i&&i.time_slots.length>0){let e=i.time_slots[0];return{day:t,time:e.start_time,displayText:`Today • ${e.start_time}`}}let s=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=s.indexOf(t);for(let t=1;t<=7;t++){let i=s[(a+t)%7],n=e.weekly_schedule?.find(e=>e.day===i&&e.is_open);if(n&&n.time_slots.length>0){let e=n.time_slots[0],s=1===t?"Tomorrow":i;return{day:i,time:e.start_time,displayText:`${s} • ${e.start_time}`}}}return{day:"TBA",time:"",displayText:"Schedule TBA"}})(),E=(e,t)=>{if(!e)return"";let i=e.trim().split(/\s+/);return i.length>t?i.slice(0,t).join(" ")+"...":e},I=async i=>{if(i.stopPropagation(),h)try{window.confirm("Are you sure you want to delete this activity?")&&(await (0,l.oe)((0,l.JU)(c.db,"activities",e.id)),t&&t(e.id))}catch(e){console.error("Error deleting activity:",e),alert("Failed to delete activity. Please try again.")}};return s.jsx("div",{className:y().activityBoxWrapper,onClick:()=>{x.push(`/activity-profile/${e.id}`)},children:(0,s.jsxs)("div",{className:y().activityBoxCard,children:[h&&s.jsx("button",{className:y().deleteButton,onClick:I,"aria-label":"Delete activity",children:s.jsx(r.Z,{className:y().deleteIcon})}),(0,s.jsxs)("div",{className:y().imageSection,children:[e.activity_image&&!S?(0,s.jsxs)(s.Fragment,{children:[s.jsx("img",{src:e.activity_image,alt:k,className:`${y().activityImage} ${p?y().imageLoaded:y().imageLoading}`,onLoad:()=>j(!0),onError:()=>N(!0)}),!p&&s.jsx("div",{className:y().imagePlaceholder})]}):s.jsx("div",{className:y().noImagePlaceholder,children:s.jsx(d.Z,{className:y().placeholderIcon})}),e.price_per_slot&&s.jsx("div",{className:y().priceBadge,children:(0,s.jsxs)("span",{children:["₹",e.price_per_slot]})})]}),(0,s.jsxs)("div",{className:y().activityBoxInfo,children:[s.jsx("h3",{children:E(k,20)}),b.length>0&&(0,s.jsxs)("div",{className:y().infoRow,children:[s.jsx(v,{className:y().categoryIcon}),s.jsx("span",{className:y().categoryText,children:b&&0!==b.length?1===b.length?b[0]:2===b.length?b.join(" & "):`${b[0]} +${b.length-1}`:""})]}),(0,s.jsxs)("div",{className:y().infoRow,children:[s.jsx(_.Z,{className:y().locationIcon}),s.jsx("span",{children:(i=e.city,f?i&&!f.toLowerCase().includes(i.toLowerCase())?`${E(f,15)}, ${i}`:E(f,20):"Location TBA")})]}),(0,s.jsxs)("div",{className:y().infoRow,children:[s.jsx(m.Z,{className:y().timeIcon}),s.jsx("span",{children:A.displayText})]}),(0,s.jsxs)("div",{className:y().infoRow,children:[s.jsx(u.Z,{className:y().aboutIcon}),s.jsx("span",{children:e.activity_duration?`${e.activity_duration} sessions`:E(B,15)})]})]})]})})}},55624:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var s=i(95344),a=i(3729),n=i(81012),o=i(87097),c=i(2522),l=i(46929),r=i(19868),d=i(99143),v=i.n(d),_=i(56506);let m=()=>s.jsx("div",{className:`${v().activityBoxWrapper} ${v().skeletonLoading}`,children:(0,s.jsxs)("div",{className:`${v().activityBoxCard} ${v().skeletonLoading}`,children:[(0,s.jsxs)("div",{className:v().activityBoxImagePlaceholder,children:[s.jsx("div",{className:v().skeletonImage}),(0,s.jsxs)("div",{className:`${v().activityTypeBadge} ${v().skeletonTypeBadge}`,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonBadgeText})]})]}),(0,s.jsxs)("div",{className:v().activityBoxInfo,children:[s.jsx("div",{className:v().skeletonActivityTitle}),(0,s.jsxs)("div",{className:v().infoRow,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonText})]}),(0,s.jsxs)("div",{className:v().infoRow,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonText})]}),(0,s.jsxs)("div",{className:v().infoRow,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonText})]})]})]})}),u=()=>(0,s.jsxs)("div",{className:`${v().activitySection} ${v().skeletonSection}`,children:[(0,s.jsxs)("div",{className:v().activitySectionHeading,children:[s.jsx("div",{className:v().skeletonHeading,children:s.jsx("div",{className:v().skeletonTitle})}),s.jsx("div",{className:v().skeletonSeeAll,children:s.jsx("div",{className:v().skeletonButton})})]}),(0,s.jsxs)("div",{className:v().emblaContainer,children:[s.jsx("div",{className:`${v().emblaButton} ${v().emblaButtonPrev} ${v().skeletonNavButton}`,children:s.jsx("div",{className:v().skeletonNavIcon})}),s.jsx("div",{className:v().embla,children:s.jsx("div",{className:v().embla__viewport,children:s.jsx("div",{className:v().embla__container,children:[1,2,3,4,5].map(e=>s.jsx("div",{className:v().embla__slide,children:s.jsx(m,{})},e))})})}),s.jsx("div",{className:`${v().emblaButton} ${v().emblaButtonNext} ${v().skeletonNavButton}`,children:s.jsx("div",{className:v().skeletonNavIcon})})]})]}),x=()=>{let[e,t]=(0,a.useState)([]),[i,d]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[y,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[j,S]=(0,a.useState)("Mumbai"),[N,k]=(0,a.useState)(!1),[f,B]=(0,c.Z)({align:"start",containScroll:"trimSnaps",dragFree:!0,slidesToScroll:1}),b=(0,a.useCallback)(()=>B&&B.scrollPrev(),[B]),A=(0,a.useCallback)(()=>B&&B.scrollNext(),[B]),[E,I]=(0,a.useState)(!1),[T,w]=(0,a.useState)(!1),C=(0,a.useCallback)(()=>{B&&(I(B.canScrollPrev()),w(B.canScrollNext()))},[B]);(0,a.useEffect)(()=>{if(B)return C(),B.on("select",C),B.on("reInit",C),()=>{B.off("select",C),B.off("reInit",C)}},[B,C]),(0,a.useEffect)(()=>{let e=localStorage.getItem("selectedCity");e&&S(e);let t=e=>{S(e.detail.city)};return window.addEventListener("locationChanged",t),()=>{window.removeEventListener("locationChanged",t)}},[]);let P=(0,a.useCallback)((e,t)=>t&&"All Cities"!==t?e.filter(e=>{let i=e.location||e.activityLocation||"",s=e.city||"";return i.toLowerCase().includes(t.toLowerCase())||s.toLowerCase().includes(t.toLowerCase())}):e,[]);(0,a.useEffect)(()=>{let t=P(e,j);d(t),console.log(`Filtered ${t.length} activities for ${j}`)},[e,j,P]);let L=async e=>{try{let t=e.filter(e=>e.activity_image).slice(0,6).map(e=>new Promise(t=>{let i=new window.Image,s=setTimeout(()=>{t("timeout")},3e3);i.onload=()=>{clearTimeout(s),t("loaded")},i.onerror=()=>{clearTimeout(s),t("error")},i.src=e.activity_image}));if(0===t.length){p(!0);return}let i=new Promise(e=>setTimeout(()=>e("global_timeout"),5e3));await Promise.race([Promise.all(t),i]),p(!0)}catch(e){console.error("Error preloading images:",e),p(!0)}};(0,a.useEffect)(()=>{(async()=>{try{if(!n.db)throw Error("Firebase is not initialized");let e=(0,o.hJ)(n.db,"activities"),i=(0,o.IO)(e,(0,o.Xo)("createdAt","desc")),s=(await (0,o.PL)(i)).docs.map(e=>{let t=e.data();return{id:e.id,name:t.name||t.activityName||"",location:t.location||t.activityLocation||"",city:t.city||"",about_activity:t.about_activity||t.aboutActivity||"",activity_image:t.activity_image||"",organizationId:t.organizationId||"",hosting_organization:t.hosting_organization||"",activity_categories:t.activity_categories||(t.activity_category?[t.activity_category]:[]),activity_languages:t.activity_languages||"",activity_duration:t.activity_duration||"",activity_age_limit:t.activity_age_limit||"",price_per_slot:t.price_per_slot||0,weekly_schedule:t.weekly_schedule||[],closed_dates:t.closed_dates||[],createdAt:t.createdAt,activityName:t.name||t.activityName||"",activityLocation:t.location||t.activityLocation||"",aboutActivity:t.about_activity||t.aboutActivity||"",activity_category:t.activity_category||""}});t(s),L(s),g(null)}catch(e){console.error("Error fetching activities:",e),g(e instanceof Error?e.message:"Failed to fetch activities"),p(!0)}finally{x(!1)}})()},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{h||(console.log("Backup timer: Force showing activities content"),k(!0),p(!0))},8e3);return()=>clearTimeout(e)},[h]);let $=e=>{t(t=>t.filter(t=>t.id!==e))};return y?s.jsx("div",{className:v().errorContainer,children:s.jsx("p",{className:v().errorMessage,children:y})}):!m&&(h||N)?i.length?(0,s.jsxs)("div",{className:v().activitySection,children:[(0,s.jsxs)("div",{className:v().activitySectionHeading,children:[s.jsx("h1",{className:v().upcomingActivitiesHeading,children:"Fun Activities"}),s.jsx(_.default,{href:"/activities",className:v().seeAllLink,children:"See All"})]}),(0,s.jsxs)("div",{className:v().emblaContainer,children:[s.jsx("button",{className:`${v().emblaButton} ${v().emblaButtonPrev} ${E?"":v().emblaButtonDisabled}`,onClick:b,disabled:!E,children:s.jsx(r.YFh,{})}),s.jsx("div",{className:v().embla,children:s.jsx("div",{className:v().embla__viewport,ref:f,children:s.jsx("div",{className:v().embla__container,children:i.map(e=>s.jsx("div",{className:v().embla__slide,children:s.jsx(l.Z,{activity:e,onDelete:$})},e.id))})})}),s.jsx("button",{className:`${v().emblaButton} ${v().emblaButtonNext} ${T?"":v().emblaButtonDisabled}`,onClick:A,disabled:!T,children:s.jsx(r.Tfp,{})})]})]}):(0,s.jsxs)("div",{className:v().activitySection,children:[(0,s.jsxs)("div",{className:v().activitySectionHeading,children:[s.jsx("h1",{className:v().upcomingActivitiesHeading,children:"Fun Activities"}),s.jsx(_.default,{href:"/activities",className:v().seeAllLink,children:"See All"})]}),s.jsx("div",{className:v().noActivitiesMessage,children:"No activities available."})]}):s.jsx(u,{})}},94395:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x});var s=i(95344),a=i(3729),n=i(8428),o=i(6058),c=i(22137),l=i(89139),r=i(55794),d=i(38271),v=i(34087),_=i(80508),m=i(13100),u=i.n(m);function x({event:e,onDelete:t,currentUserId:i}){let m=(0,n.useRouter)(),x=i&&i===e?.organizationId,[y,g]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),j=Array.isArray(e?.time_slots)?e.time_slots:[],S=j.length>0?j[0].date:"No Date Available",N=j.length>0?j[0].start_time:"",k=e.eventCategories&&e.eventCategories.length>0?e.eventCategories[0]:e.eventType,f=(e,t)=>{if(!e)return"";let i=e.trim().split(/\s+/);return i.length>t?i.slice(0,t).join(" ")+"...":e},B=e=>{switch(e.toLowerCase()){case"concert":case"music":return s.jsx(o.Z,{className:u().eventTypeIcon});case"comedy":case"standup":return s.jsx(c.Z,{className:u().eventTypeIcon});case"party":case"festival":case"celebration":return s.jsx(l.Z,{className:u().eventTypeIcon});default:return s.jsx(r.Z,{className:u().eventTypeIcon})}},b=async i=>{if(i.stopPropagation(),x)try{window.confirm("Are you sure you want to delete this event?")&&t&&t(e.id)}catch(e){console.error("Error deleting event:",e),alert("Failed to delete event. Please try again.")}};return s.jsx("div",{className:u().eventBoxWrapper,onClick:()=>{m.push(`/event-profile/${e.id}`)},children:(0,s.jsxs)("div",{className:u().eventBoxCard,children:[x&&s.jsx("button",{className:u().deleteButton,onClick:b,"aria-label":"Delete event",children:s.jsx(d.Z,{className:u().deleteIcon})}),(0,s.jsxs)("div",{className:u().imageSection,children:[e.event_image&&!h?(0,s.jsxs)(s.Fragment,{children:[s.jsx("img",{src:e.event_image||"/placeholder.svg?height=400&width=300",alt:e.eventTitle||e.title||"Event",className:`${u().eventImage} ${y?u().imageLoaded:u().imageLoading}`,onLoad:()=>g(!0),onError:()=>p(!0)}),!y&&s.jsx("div",{className:u().imagePlaceholder})]}):s.jsx("div",{className:u().noImagePlaceholder,children:B(k)}),(0,s.jsxs)("div",{className:`${u().eventTypeBadge} ${u()[(e=>{switch(e.toLowerCase()){case"concert":case"music":return"music";case"comedy":case"standup":return"comedy";case"party":case"festival":case"celebration":return"party";case"theater":case"drama":return"theater";default:return"default"}})(k)]}`,children:[B(k),s.jsx("span",{children:k})]})]}),(0,s.jsxs)("div",{className:u().eventBoxInfo,children:[s.jsx("h3",{children:f(e.eventTitle||e.title||"",20)}),(0,s.jsxs)("div",{className:u().infoRow,children:[s.jsx(v.Z,{className:u().timeIcon}),(0,s.jsxs)("span",{children:["No Date Available"===S?"TBA":new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric"})," ",N&&`• ${N}`]})]}),(0,s.jsxs)("div",{className:u().infoRow,children:[s.jsx(_.Z,{className:u().venueIcon}),s.jsx("span",{className:u().venueText,children:f(e.eventVenue||e.event_venue||"",25)})]})]})]})})}},56743:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var s=i(95344),a=i(3729),n=i(81012),o=i(87097),c=i(2522),l=i(94395),r=i(19868),d=i(83738),v=i.n(d),_=i(56506),m=i(13100),u=i.n(m);let x=()=>s.jsx("div",{className:`${u().eventBoxWrapper} ${v().skeletonLoading}`,children:(0,s.jsxs)("div",{className:`${u().eventBoxCard} ${v().skeletonLoading}`,children:[(0,s.jsxs)("div",{className:u().imageSection,children:[s.jsx("div",{className:v().skeletonImage}),(0,s.jsxs)("div",{className:`${u().eventTypeBadge} ${v().skeletonTypeBadge}`,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonBadgeText})]})]}),(0,s.jsxs)("div",{className:u().eventBoxInfo,children:[s.jsx("div",{className:v().skeletonEventTitle}),(0,s.jsxs)("div",{className:u().infoRow,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonText})]}),(0,s.jsxs)("div",{className:u().infoRow,children:[s.jsx("div",{className:v().skeletonIcon}),s.jsx("div",{className:v().skeletonText})]})]})]})}),y=()=>(0,s.jsxs)("div",{className:`${v().eventsSection} ${v().skeletonSection}`,children:[(0,s.jsxs)("div",{className:v().eventsSectionHeading,children:[s.jsx("div",{className:v().skeletonHeading,children:s.jsx("div",{className:v().skeletonTitle})}),s.jsx("div",{className:v().skeletonSeeAll,children:s.jsx("div",{className:v().skeletonButton})})]}),(0,s.jsxs)("div",{className:v().emblaContainer,children:[s.jsx("div",{className:`${v().emblaButton} ${v().emblaButtonPrev} ${v().skeletonNavButton}`,children:s.jsx("div",{className:v().skeletonNavIcon})}),s.jsx("div",{className:v().embla,children:s.jsx("div",{className:v().embla__viewport,children:s.jsx("div",{className:v().embla__container,children:[1,2,3,4,5].map(e=>s.jsx("div",{className:v().embla__slide,children:s.jsx(x,{})},e))})})}),s.jsx("div",{className:`${v().emblaButton} ${v().emblaButtonNext} ${v().skeletonNavButton}`,children:s.jsx("div",{className:v().skeletonNavIcon})})]})]}),g=()=>{let[e,t]=(0,a.useState)([]),[i,d]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[j,S]=(0,a.useState)("Mumbai"),[N,k]=(0,a.useState)(!1),[f,B]=(0,c.Z)({align:"start",containScroll:"trimSnaps",dragFree:!0,slidesToScroll:1}),b=(0,a.useCallback)(()=>B&&B.scrollPrev(),[B]),A=(0,a.useCallback)(()=>B&&B.scrollNext(),[B]),[E,I]=(0,a.useState)(!1),[T,w]=(0,a.useState)(!1),C=(0,a.useCallback)(()=>{B&&(I(B.canScrollPrev()),w(B.canScrollNext()))},[B]);(0,a.useEffect)(()=>{if(B)return C(),B.on("select",C),B.on("reInit",C),()=>{B.off("select",C),B.off("reInit",C)}},[B,C]),(0,a.useEffect)(()=>{let e=localStorage.getItem("selectedCity");e&&S(e);let t=e=>{S(e.detail.city)};return window.addEventListener("locationChanged",t),()=>{window.removeEventListener("locationChanged",t)}},[]);let P=(0,a.useCallback)((e,t)=>t&&"All Cities"!==t?e.filter(e=>(e.event_venue||e.eventVenue||"").toLowerCase().includes(t.toLowerCase())):e,[]);(0,a.useEffect)(()=>{let t=P(e,j);d(t),console.log(`Filtered ${t.length} events for ${j}`)},[e,j,P]);let L=async e=>{try{let t=e.filter(e=>e.event_image).slice(0,6).map(e=>new Promise(t=>{let i=new window.Image,s=setTimeout(()=>{t("timeout")},3e3);i.onload=()=>{clearTimeout(s),t("loaded")},i.onerror=()=>{clearTimeout(s),t("error")},i.src=e.event_image}));if(0===t.length){p(!0);return}let i=new Promise(e=>setTimeout(()=>e("global_timeout"),5e3));await Promise.race([Promise.all(t),i]),p(!0)}catch(e){console.error("Error preloading images:",e),p(!0)}};(0,a.useEffect)(()=>{(async()=>{try{if(!n.db)throw Error("Firebase is not initialized");let e=(0,o.hJ)(n.db,"events"),i=(0,o.IO)(e,(0,o.Xo)("createdAt","desc")),s=(await (0,o.PL)(i)).docs.map(e=>{let t=e.data();return{id:e.id,eventTitle:t.title||t.eventTitle||"",eventType:t.event_type||t.eventType||"event",hostingClub:t.hosting_club||t.hostingClub||"",eventDateTime:t.event_date_time||t.eventDateTime,eventVenue:t.event_venue||t.eventVenue||"",eventRegistrationLink:t.event_registration_link||t.eventRegistrationLink,aboutEvent:t.about_event||t.aboutEvent||"",event_image:t.event_image||"",organizationId:t.organizationId||"",time_slots:t.time_slots||[],tickets:t.tickets||[],createdAt:t.createdAt}});console.log("Fetched events with org IDs:",s),t(s),L(s),g(null)}catch(e){console.error("Error fetching events:",e),g(e instanceof Error?e.message:"Failed to fetch events"),p(!0)}finally{u(!1)}})()},[]),(0,a.useEffect)(()=>{let e=setTimeout(()=>{h||(console.log("Backup timer: Force showing content"),k(!0),p(!0))},8e3);return()=>clearTimeout(e)},[h]);let $=e=>{t(t=>t.filter(t=>t.id!==e))};return x?s.jsx("div",{className:v().errorContainer,children:s.jsx("p",{className:v().errorMessage,children:x})}):!m&&(h||N)?i.length?(0,s.jsxs)("div",{className:v().eventsSection,children:[(0,s.jsxs)("div",{className:v().eventsSectionHeading,children:[s.jsx("h1",{className:v().upcomingEventsHeading,children:"Upcoming Events"}),s.jsx(_.default,{href:"/events",className:v().seeAllLink,children:"See All"})]}),(0,s.jsxs)("div",{className:v().emblaContainer,children:[s.jsx("button",{className:`${v().emblaButton} ${v().emblaButtonPrev} ${E?"":v().emblaButtonDisabled}`,onClick:b,disabled:!E,children:s.jsx(r.YFh,{})}),s.jsx("div",{className:v().embla,children:s.jsx("div",{className:v().embla__viewport,ref:f,children:s.jsx("div",{className:v().embla__container,children:i.map(e=>s.jsx("div",{className:v().embla__slide,children:s.jsx(l.Z,{event:e,onDelete:$})},e.id))})})}),s.jsx("button",{className:`${v().emblaButton} ${v().emblaButtonNext} ${T?"":v().emblaButtonDisabled}`,onClick:A,disabled:!T,children:s.jsx(r.Tfp,{})})]})]}):(0,s.jsxs)("div",{className:v().eventsSection,children:[(0,s.jsxs)("div",{className:v().eventsSectionHeading,children:[s.jsx("h1",{className:v().upcomingEventsHeading,children:"Upcoming Events"}),s.jsx(_.default,{href:"/events",className:v().seeAllLink,children:"See All"})]}),s.jsx("div",{className:v().noEventsMessage,children:"No events available."})]}):s.jsx(y,{})}},36687:e=>{e.exports={activityBoxWrapper:"ActivityBox_activityBoxWrapper__VCRzY",activityBoxCard:"ActivityBox_activityBoxCard__1_YjF",deleteButton:"ActivityBox_deleteButton__hvYJU",deleteIcon:"ActivityBox_deleteIcon__xCNgQ",imageSection:"ActivityBox_imageSection__IpgGG",activityImage:"ActivityBox_activityImage__lUrE3",imageLoaded:"ActivityBox_imageLoaded__j9jz0",imageLoading:"ActivityBox_imageLoading__AkTRM",imagePlaceholder:"ActivityBox_imagePlaceholder__aThPS",shimmer:"ActivityBox_shimmer__qfadw",noImagePlaceholder:"ActivityBox_noImagePlaceholder__QfSID",placeholderIcon:"ActivityBox_placeholderIcon__DPhlS",priceBadge:"ActivityBox_priceBadge__jKQ1o",activityTypeBadge:"ActivityBox_activityTypeBadge__hS4OP",activityBoxInfo:"ActivityBox_activityBoxInfo___eIkV",infoRow:"ActivityBox_infoRow__kYXLx",locationIcon:"ActivityBox_locationIcon__ZXv6v",timeIcon:"ActivityBox_timeIcon__UfqQQ",aboutIcon:"ActivityBox_aboutIcon__QNrZe",categoryIcon:"ActivityBox_categoryIcon__hb7BY",categoryText:"ActivityBox_categoryText__islqS"}},99143:e=>{e.exports={activitySection:"ActivitySection_activitySection___mm52",activitySectionHeading:"ActivitySection_activitySectionHeading__S4ROi",upcomingActivitiesHeading:"ActivitySection_upcomingActivitiesHeading__o9nKf",seeAllLink:"ActivitySection_seeAllLink__6Cd6n",noActivitiesMessage:"ActivitySection_noActivitiesMessage__OgoAp",emblaContainer:"ActivitySection_emblaContainer__EOHAC",embla:"ActivitySection_embla__j5ZQb",embla__viewport:"ActivitySection_embla__viewport__6GiyW",embla__container:"ActivitySection_embla__container__zqSll",embla__slide:"ActivitySection_embla__slide__bjEIL",emblaButton:"ActivitySection_emblaButton__xZG8V",emblaButtonPrev:"ActivitySection_emblaButtonPrev__HGs0A",emblaButtonNext:"ActivitySection_emblaButtonNext__Gc9s_",emblaButtonDisabled:"ActivitySection_emblaButtonDisabled__onXa8",errorContainer:"ActivitySection_errorContainer__s4UmA",errorMessage:"ActivitySection_errorMessage__7JgZ_",skeletonSection:"ActivitySection_skeletonSection__iaMhC",fadeIn:"ActivitySection_fadeIn__D5jP_",skeletonLoading:"ActivitySection_skeletonLoading__N4x_W",skeletonHeading:"ActivitySection_skeletonHeading__LRXnp",skeletonTitle:"ActivitySection_skeletonTitle__iSLxn",skeletonSeeAll:"ActivitySection_skeletonSeeAll__6TgnV",skeletonButton:"ActivitySection_skeletonButton__dHA92",skeletonNavButton:"ActivitySection_skeletonNavButton__tunC5",skeletonNavIcon:"ActivitySection_skeletonNavIcon__4rElV",activityBoxCard:"ActivitySection_activityBoxCard__1061L",skeletonImage:"ActivitySection_skeletonImage__n1xYD",gradientShift:"ActivitySection_gradientShift__37_yo",activityTypeBadge:"ActivitySection_activityTypeBadge__JeVmN",skeletonTypeBadge:"ActivitySection_skeletonTypeBadge__t53_7",skeletonBadgeText:"ActivitySection_skeletonBadgeText__AyNk_",infoRow:"ActivitySection_infoRow__fkgf6",skeletonActivityTitle:"ActivitySection_skeletonActivityTitle__kx59a",skeletonIcon:"ActivitySection_skeletonIcon__zOJsc",skeletonText:"ActivitySection_skeletonText__YfXki",shimmer:"ActivitySection_shimmer__q7DrF",activityBoxWrapper:"ActivitySection_activityBoxWrapper__s0zcG",activityBoxImagePlaceholder:"ActivitySection_activityBoxImagePlaceholder___WiMc",activityBoxInfo:"ActivitySection_activityBoxInfo__Cmo__"}},13100:e=>{e.exports={eventBoxWrapper:"EventBox_eventBoxWrapper__nqxja",eventBoxCard:"EventBox_eventBoxCard__i2Ojs",deleteButton:"EventBox_deleteButton__4QlAH",deleteIcon:"EventBox_deleteIcon__CgdVp",imageSection:"EventBox_imageSection__Eu0ut",eventImage:"EventBox_eventImage__smRJF",imageLoaded:"EventBox_imageLoaded__BLN3N",imageLoading:"EventBox_imageLoading__xFgLp",imagePlaceholder:"EventBox_imagePlaceholder__Z8gfa",pulse:"EventBox_pulse__8_9eZ",noImagePlaceholder:"EventBox_noImagePlaceholder__tY1sG",placeholderIcon:"EventBox_placeholderIcon___Tgi4",eventTypeBadge:"EventBox_eventTypeBadge__5LK78",eventTypeIcon:"EventBox_eventTypeIcon__VzKPK",music:"EventBox_music__mlj6F",comedy:"EventBox_comedy__RZs3p",party:"EventBox_party__f5N2E",theater:"EventBox_theater__6JLNl",default:"EventBox_default__0lQfV",eventBoxInfo:"EventBox_eventBoxInfo__p3yjD",infoRow:"EventBox_infoRow__675y8",timeIcon:"EventBox_timeIcon__AJJMS",venueIcon:"EventBox_venueIcon___6GMS",venueText:"EventBox_venueText__0SWgh"}},83738:e=>{e.exports={eventsSection:"EventsSection_eventsSection__kkmIT",eventsSectionHeading:"EventsSection_eventsSectionHeading__e5HNb",upcomingEventsHeading:"EventsSection_upcomingEventsHeading__MMRLz",seeAllLink:"EventsSection_seeAllLink__pgwjt",noEventsMessage:"EventsSection_noEventsMessage__I6O00",emblaContainer:"EventsSection_emblaContainer__M6o5O",embla:"EventsSection_embla__gwk5r",embla__viewport:"EventsSection_embla__viewport__ePYDR",embla__container:"EventsSection_embla__container__DJEuz",embla__slide:"EventsSection_embla__slide__1TF25",emblaButton:"EventsSection_emblaButton__RDjIV",emblaButtonPrev:"EventsSection_emblaButtonPrev__peCNC",emblaButtonNext:"EventsSection_emblaButtonNext__TxqoU",emblaButtonDisabled:"EventsSection_emblaButtonDisabled__WkO7P",errorContainer:"EventsSection_errorContainer__ZKc7Q",errorMessage:"EventsSection_errorMessage__Cuuga",skeletonSection:"EventsSection_skeletonSection__kDIum",fadeIn:"EventsSection_fadeIn__hvipC",shimmerEffect:"EventsSection_shimmerEffect__iLCE_",shimmer:"EventsSection_shimmer___dMl2",skeletonHeading:"EventsSection_skeletonHeading__L93PM",skeletonTitle:"EventsSection_skeletonTitle__Z2eYO",skeletonSeeAll:"EventsSection_skeletonSeeAll__Imhpc",skeletonButton:"EventsSection_skeletonButton__ZMqaq",skeletonNavButton:"EventsSection_skeletonNavButton___lFgQ",skeletonNavIcon:"EventsSection_skeletonNavIcon__gq6xE",skeletonLoading:"EventsSection_skeletonLoading__PxmfS",eventBoxWrapper:"EventsSection_eventBoxWrapper__5mRP_",eventBoxCard:"EventsSection_eventBoxCard__XaBpk",imageSection:"EventsSection_imageSection__vo5BW",skeletonImage:"EventsSection_skeletonImage__fHMm2",gradientShift:"EventsSection_gradientShift__78dHV",eventBoxInfo:"EventsSection_eventBoxInfo__S0fkD",skeletonTypeBadge:"EventsSection_skeletonTypeBadge__ksqOb",skeletonBadgeText:"EventsSection_skeletonBadgeText__p_4RE",skeletonEventTitle:"EventsSection_skeletonEventTitle__PR23G",skeletonIcon:"EventsSection_skeletonIcon__4pTZh",skeletonText:"EventsSection_skeletonText__etPnr"}},95703:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var s=i(25036);i(40002);var a=i(86843);let n=(0,a.createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/components/EventsSection/EventsSection.tsx`),{__esModule:o,$$typeof:c}=n,l=n.default,r=(0,a.createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/components/ActivitySection/ActivitySection.tsx`),{__esModule:d,$$typeof:v}=r,_=r.default;function m(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[s.jsx(l,{}),s.jsx(_,{})]})}},2522:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var s=i(3729);function a(e){return"[object Object]"===Object.prototype.toString.call(e)||Array.isArray(e)}function n(e,t){let i=Object.keys(e),s=Object.keys(t);return i.length===s.length&&JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&i.every(i=>{let s=e[i],o=t[i];return"function"==typeof s?`${s}`==`${o}`:a(s)&&a(o)?n(s,o):s===o})}function o(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function c(e={},t=[]){let i=(0,s.useRef)(e),a=(0,s.useRef)(t),[c,l]=(0,s.useState)(),[r,d]=(0,s.useState)(),v=(0,s.useCallback)(()=>{c&&c.reInit(i.current,a.current)},[c]);return(0,s.useEffect)(()=>{n(i.current,e)||(i.current=e,v())},[e,v]),(0,s.useEffect)(()=>{!function(e,t){if(e.length!==t.length)return!1;let i=o(e),s=o(t);return i.every((e,t)=>n(e,s[t]))}(a.current,t)&&(a.current=t,v())},[t,v]),(0,s.useEffect)(()=>{l(void 0)},[r,l]),[d,c]}c.globalOptions=void 0}};var t=require("../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[1638,4292,9868,4684],()=>i(7317));module.exports=s})();