(()=>{var e={};e.id=4695,e.ids=[4695],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},22889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>l,pages:()=>c,routeModule:()=>g,tree:()=>o});var r=s(50482),i=s(69108),a=s(62563),n=s.n(a),u=s(68300),d={};for(let e in u)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>u[e]);s.d(t,d);let o=["",{children:["edit-guide",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,95153)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-guide/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39258)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-guide/[id]/page.tsx"],l="/edit-guide/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/edit-guide/[id]/page",pathname:"/edit-guide/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},77440:(e,t,s)=>{Promise.resolve().then(s.bind(s,76571))},76571:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(95344),i=s(3729),a=s(81012),n=s(87097),u=s(73424),d=s(14408),o=s(8428),c=s(35605),l=s(18414),p=s.n(l);let g=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),m=()=>{let e=(0,o.useParams)(),t=(0,o.useRouter)(),s=e?.id,[l,m]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!0),[_,v]=(0,i.useState)(""),[j,f]=(0,i.useState)(null),[E,G]=(0,i.useState)(""),[b,y]=(0,i.useState)(null),[q,P]=(0,i.useState)(!1),[N,C]=(0,i.useState)(""),[S,B]=(0,i.useState)(null),U=(0,d.v0)();(0,i.useEffect)(()=>{let e=(0,d.Aj)(U,e=>{B(e)});return()=>e()},[U]),(0,i.useEffect)(()=>{let e=async()=>{if(!S){m(!1),h(!1);return}try{let e=await (0,n.QT)((0,n.JU)(a.db,"guides",s));if(!e.exists()){t.push("/guides");return}let r=e.data(),i=S.uid===r.createdBy,u="shrreyasgurav@gmail.com"===S.email;m(i||u),(i||u)&&(v(r.name),G(r.cover_image),y(r.cover_image)),h(!1)}catch(e){console.error("Error fetching guide:",e),h(!1)}};null!==S&&e()},[S,s,t]);let w=async e=>{if(e.preventDefault(),!_.trim()){C("Please enter a guide name");return}P(!0),C("");try{let e=E;if(j){let t=j.name.split(".").pop(),s=`guides/covers/${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`,r=(0,u.iH)(a.tO,s);await (0,u.KV)(r,j),e=await (0,u.Jt)(r)}let r=g(_.trim()),i={name:_.trim(),slug:r,cover_image:e,updatedAt:new Date},d=(0,n.JU)(a.db,"guides",s);await (0,n.r7)(d,i),C("Guide updated successfully!"),setTimeout(()=>t.push(`/guides/${r}`),2e3)}catch(e){console.error("Error updating guide:",e),C(`Failed to update guide: ${e instanceof Error?e.message:"Unknown error"}`)}finally{P(!1)}};return x?(0,r.jsxs)(r.Fragment,{children:[r.jsx(c.ql,{children:r.jsx("title",{children:"Loading... - Zest"})}),r.jsx("div",{className:p().loadingContainer,children:r.jsx("div",{className:p().loadingSpinner,children:"Loading..."})})]}):l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.ql,{children:[(0,r.jsxs)("title",{children:["Edit Guide - ",_," - Zest"]}),r.jsx("meta",{name:"description",content:`Edit the ${_} guide on Zest.`})]}),r.jsx("div",{className:p().createEventPage,children:(0,r.jsxs)("div",{className:p().createEventContainer,children:[r.jsx("h1",{className:p().pageTitle,children:"Edit City Guide"}),(0,r.jsxs)("form",{onSubmit:w,className:p().createEventForm,children:[(0,r.jsxs)("div",{className:p().formSection,children:[r.jsx("h2",{children:"Guide Cover"}),(0,r.jsxs)("div",{className:p().formGroup,children:[r.jsx("label",{children:"Guide Name"}),r.jsx("input",{type:"text",value:_,onChange:e=>v(e.target.value),placeholder:"Enter guide name",required:!0})]}),r.jsx("p",{className:p().imageTip,children:"Please upload a landscape image for best results (max 5MB)"}),r.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880){C("Image size should be less than 5MB");return}f(t),y(URL.createObjectURL(t))}},className:p().fileInput}),b&&r.jsx("div",{className:p().imagePreview,children:r.jsx("img",{src:b,alt:"Preview"})})]}),N&&r.jsx("div",{className:`${p().message} ${N.includes("success")?p().success:p().error}`,children:N}),(0,r.jsxs)("div",{className:p().formActions,children:[r.jsx("button",{type:"submit",className:p().submitButton,disabled:q,children:q?"Updating Guide...":"Update Guide"}),r.jsx("button",{type:"button",className:p().cancelButton,onClick:()=>t.push(`/guides/${g(_)}`),disabled:q,children:"Cancel"})]})]})]})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.ql,{children:[r.jsx("title",{children:"Unauthorized - Zest"}),r.jsx("meta",{name:"description",content:"You don't have permission to edit this guide."})]}),r.jsx("div",{className:p().unauthorizedMessageContainer,children:(0,r.jsxs)("div",{className:p().unauthorizedMessage,children:[r.jsx("h1",{children:"Unauthorized Access"}),r.jsx("p",{children:"You don't have permission to edit this guide."}),r.jsx("button",{onClick:()=>t.push("/guides"),className:p().backButton,children:"Back to Guides"})]})})]})}},18414:e=>{e.exports={createEventPage:"EditGuide_createEventPage__EfUBr",createEventContainer:"EditGuide_createEventContainer__X1neE",pageTitle:"EditGuide_pageTitle__VT9y1",createEventForm:"EditGuide_createEventForm__fUThR",formSection:"EditGuide_formSection__cgBWv",formGroup:"EditGuide_formGroup__shHcO",imageTip:"EditGuide_imageTip__CkAe0",fileInput:"EditGuide_fileInput__zpySu",imagePreview:"EditGuide_imagePreview__bUQTj",formActions:"EditGuide_formActions__N_fef",submitButton:"EditGuide_submitButton__xijS3",cancelButton:"EditGuide_cancelButton__b43Nx",message:"EditGuide_message__rBbrU",success:"EditGuide_success__NBrZ4",error:"EditGuide_error__pbLer",loadingContainer:"EditGuide_loadingContainer__jS49B",loadingSpinner:"EditGuide_loadingSpinner__gljL2",unauthorizedMessageContainer:"EditGuide_unauthorizedMessageContainer__j9TrV",unauthorizedMessage:"EditGuide_unauthorizedMessage__nlF7C",backButton:"EditGuide_backButton__Q_ek5"}},95153:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>n});let r=(0,s(86843).createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-guide/[id]/page.tsx`),{__esModule:i,$$typeof:a}=r,n=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,4292,4684],()=>s(22889));module.exports=r})();