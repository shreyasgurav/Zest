(()=>{var e={};e.id=9373,e.ids=[9373],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},88475:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var i=a(50482),s=a(69108),r=a(62563),n=a.n(r),l=a(68300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["edit-event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,1650)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-event/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,39258)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-event/[id]/page.tsx"],u="/edit-event/[id]/page",p={require:a,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/edit-event/[id]/page",pathname:"/edit-event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},60835:(e,t,a)=>{Promise.resolve().then(a.bind(a,63139))},63139:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var i=a(95344),s=a(3729),r=a(81012),n=a(87097),l=a(73424),d=a(14408),o=a(8428),c=a(8591),u=a.n(c),p=a(36853),m=a(72171),h=a(49921);let g=["Mumbai","Delhi","Bangalore","Hyderabad","Ahmedabad","Chennai","Kolkata","Surat","Pune","Jaipur","Lucknow","Kanpur","Nagpur","Indore","Thane","Bhopal","Visakhapatnam","Pimpri-Chinchwad","Patna","Vadodara","Ghaziabad","Ludhiana","Agra","Nashik","Faridabad","Meerut","Rajkot","Kalyan-Dombivali","Vasai-Virar","Varanasi","Srinagar","Aurangabad","Dhanbad","Amritsar","Navi Mumbai","Allahabad","Ranchi","Howrah","Coimbatore","Jabalpur","Gwalior","Vijayawada","Jodhpur","Madurai","Raipur","Kota","Guwahati","Chandigarh","Solapur","Hubli-Dharwad","Mysore","Tiruchirappalli","Bareilly","Aligarh","Tiruppur","Gurgaon","Moradabad","Jalandhar","Bhubaneswar","Salem","Warangal","Guntur","Noida","Dehradun","Kochi"],v=[{id:"music",label:"Music"},{id:"comedy",label:"Comedy"},{id:"clubbing",label:"Clubbing"},{id:"party",label:"Party"},{id:"art",label:"Art"},{id:"adventure",label:"Adventure"},{id:"sports",label:"Sports"}],_=[{id:"duration",label:"Duration",placeholder:"e.g., 2 hours"},{id:"age_requirement",label:"Age Requirement",placeholder:"e.g., 16+ years"},{id:"language",label:"Language",placeholder:"e.g., Hindi, English"},{id:"seating",label:"Seating Arrangement",placeholder:"e.g., Theater, Round Table"},{id:"kid_friendly",label:"Kid Friendly",placeholder:"e.g., Yes/No or details"},{id:"pet_friendly",label:"Pet Friendly",placeholder:"e.g., Yes/No or details"},{id:"wheelchair",label:"Wheelchair Accessible",placeholder:"e.g., Yes/No or details"},{id:"parking",label:"Parking Available",placeholder:"e.g., Yes/No or details"},{id:"food",label:"Food & Beverages",placeholder:"e.g., Snacks, Dinner, Drinks"},{id:"outdoor",label:"Outdoor Event",placeholder:"e.g., Yes/No or details"},{id:"indoor",label:"Indoor Event",placeholder:"e.g., Yes/No or details"},{id:"dress_code",label:"Dress Code",placeholder:"e.g., Formal, Casual"},{id:"photography",label:"Photography Allowed?",placeholder:"e.g., Yes/No or details"},{id:"alcohol",label:"Alcohol allowed?",placeholder:"e.g., Yes/No or details"}],x=({params:e})=>{let t=(0,o.useRouter)(),[a,c]=(0,s.useState)(""),[x,E]=(0,s.useState)(""),[b,y]=(0,s.useState)(""),[j,f]=(0,s.useState)(!0),[N,S]=(0,s.useState)(""),[C,w]=(0,s.useState)(null),[P,I]=(0,s.useState)(null),[T,D]=(0,s.useState)([]),[k,q]=(0,s.useState)(""),[B,A]=(0,s.useState)([{date:"",startTime:"",endTime:""}]),[G,L]=(0,s.useState)([{name:"",capacity:"",price:""}]),[M,R]=(0,s.useState)(""),[U,F]=(0,s.useState)(!1),[$,z]=(0,s.useState)(!1),[O,Y]=(0,s.useState)({}),[K,V]=(0,s.useState)(""),[Z,J]=(0,s.useState)("Mumbai"),Q=(0,d.v0)();(0,s.useEffect)(()=>{(async()=>{if(!Q.currentUser){t.push("/");return}try{let a=await (0,n.QT)((0,n.JU)(r.db,"events",e.id));if(a.exists()){let e=a.data();if(e.organizationId!==Q.currentUser.uid){t.push("/");return}if(c(e.title||""),E(e.event_venue||""),R(e.event_venue||""),y(e.about_event||""),V(e.event_image||""),I(e.event_image||null),D(e.event_categories||[]),q(e.event_languages||""),Y(e.event_guides||{}),J(e.city||"Mumbai"),e.time_slots&&e.time_slots.length>0){let t=e.time_slots.map(e=>({date:e.date||"",startTime:e.start_time||"",endTime:e.end_time||""}));A(t)}if(e.tickets&&e.tickets.length>0){let t=e.tickets.map(e=>({name:e.name||"",capacity:e.capacity.toString()||"",price:e.price.toString()||""}));L(t)}}}catch(e){console.error("Error fetching event details:",e),S("Error loading event details")}finally{f(!1)}})()},[e.id,Q.currentUser,t]);let H=e=>{L(G.filter((t,a)=>a!==e))},W=(e,t,a)=>{let i=[...G];i[e][t]=a,L(i)},X=()=>G.every(e=>e.name&&e.capacity&&e.price&&parseInt(e.capacity)>0&&parseFloat(e.price)>=0),ee=e=>{A(B.filter((t,a)=>a!==e))},et=(e,t,a)=>{let i=[...B];i[e][t]=a,A(i)},ea=()=>B.every(e=>e.date&&e.startTime&&e.endTime&&new Date(`${e.date} ${e.endTime}`)>new Date(`${e.date} ${e.startTime}`)),ei=async e=>{if(!e)return null;try{if(e.size>5242880)throw Error("Image size should be less than 5MB");if(!e.type.startsWith("image/"))throw Error("File must be an image");let t=e.name.split(".").pop(),a=`events/${Date.now()}-${Math.random().toString(36).substring(7)}.${t}`,i=(0,l.iH)(r.tO,a),s={contentType:e.type,customMetadata:{uploadedBy:Q.currentUser?.uid||"unknown",uploadTime:new Date().toISOString()}},n=new Blob([await e.arrayBuffer()],{type:e.type}),d=await (0,l.KV)(i,n,s);return await (0,l.Jt)(d.ref)}catch(e){throw console.error("Error in uploadImage:",e),Error(`Image upload failed: ${e.message}`)}},es=e=>{D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},er=e=>{Y(t=>e in t?Object.fromEntries(Object.entries(t).filter(([t])=>t!==e)):{...t,[e]:""})},en=(e,t)=>{Y(a=>({...a,[e]:t}))},el=async i=>{if(i.preventDefault(),!Q.currentUser){S("Please sign in to update the event");return}if(!a.trim()||!x.trim()||!ea()||!X()||0===T.length){S("Please fill in all required fields and ensure valid time slots, tickets, and at least one category");return}f(!0),S("");try{let i=K,s=!1,l="";if(C)try{let e=await ei(C);e&&(i=e)}catch(e){console.error("Image upload failed:",e),s=!0,l=e.message}let d={title:a.trim(),time_slots:B.map(e=>({date:e.date,start_time:e.startTime,end_time:e.endTime,available:!0})),tickets:G.map(e=>({name:e.name.trim(),capacity:parseInt(e.capacity),price:parseFloat(e.price),available_capacity:parseInt(e.capacity)})),event_venue:x.trim(),about_event:b.trim(),event_image:i,event_categories:T,event_languages:k.trim(),event_guides:O,updatedAt:(0,n.Bt)(),image_upload_status:s?"failed":i?"success":"none"};await (0,n.r7)((0,n.JU)(r.db,"events",e.id),d),s?S(`Event updated successfully! Note: ${l}`):S("Event updated successfully!"),setTimeout(()=>{t.push("/"),t.refresh()},2e3)}catch(e){console.error("Error updating event:",e),S(`Failed to update event: ${e.message}`)}finally{f(!1)}};return j?i.jsx("div",{className:u().editEventPage,children:i.jsx("div",{className:u().loadingState,children:"Loading event details..."})}):i.jsx("div",{className:u().editEventPage,children:(0,i.jsxs)("div",{className:u().editEventContainer,children:[i.jsx("h1",{className:u().pageTitle,children:"Edit Event"}),(0,i.jsxs)("form",{onSubmit:el,className:u().editEventForm,children:[(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Event Profile Image"}),(0,i.jsxs)("label",{htmlFor:"event-image-upload",className:u().imageUploadBox,children:[i.jsx("span",{className:u().imageUploadLabel,children:P?"Change Event Image":"Click to upload event profile image"}),P&&i.jsx("div",{className:u().imagePreview,children:i.jsx("img",{src:P,alt:"Preview",className:u().imagePreviewImg})}),i.jsx("input",{id:"event-image-upload",type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){if(t.size>5242880){S("Image size should be less than 5MB");return}w(t),I(URL.createObjectURL(t))}},className:u().fileInput})]}),i.jsx("p",{className:u().imageTip,children:"Please upload a square image for best results (max 5MB)"})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Event Details"}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Event Name"}),i.jsx("input",{type:"text",value:a,onChange:e=>c(e.target.value),placeholder:"Enter event name",required:!0})]}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Event Categories"}),i.jsx("div",{className:u().categoriesGrid,children:v.map(e=>i.jsx("button",{type:"button",className:`${u().categoryButton} ${T.includes(e.id)?u().categoryButtonActive:""}`,onClick:()=>es(e.id),children:e.label},e.id))}),0===T.length&&i.jsx("p",{className:u().errorText,children:"Please select at least one category"})]})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Update Tickets"}),G.map((e,t)=>i.jsx("div",{className:u().ticketSlot,children:(0,i.jsxs)("div",{className:u().formRow,children:[(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Ticket Name"}),i.jsx("input",{type:"text",value:e.name,onChange:e=>W(t,"name",e.target.value),placeholder:"e.g., General, VIP, Fan Pit",required:!0})]}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Capacity"}),i.jsx("input",{type:"number",value:e.capacity,onChange:e=>W(t,"capacity",e.target.value),placeholder:"Number of tickets",min:"1",required:!0})]}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Price (â‚¹)"}),i.jsx("input",{type:"number",value:e.price,onChange:e=>W(t,"price",e.target.value),placeholder:"Ticket price",min:"0",step:"0.01",required:!0})]}),G.length>1&&i.jsx("button",{type:"button",className:u().removeDateButton,onClick:()=>H(t),children:"Remove"})]})},t)),i.jsx("button",{type:"button",className:u().addDateButton,onClick:()=>{L([...G,{name:"",capacity:"",price:""}])},children:"Add Another Ticket Type"})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Event Schedule"}),B.map((e,t)=>(0,i.jsxs)("div",{className:u().scheduleSlotContainer,children:[(0,i.jsxs)("div",{className:u().scheduleRow,children:[(0,i.jsxs)("div",{className:u().scheduleIndicatorCol,children:[i.jsx("span",{className:u().scheduleCircleFilled}),i.jsx("span",{className:u().scheduleDashedLine}),i.jsx("span",{className:u().scheduleCircle})]}),(0,i.jsxs)("div",{className:u().scheduleLabelsCol,children:[i.jsx("span",{className:u().scheduleLabel,children:"Start"}),i.jsx("span",{className:u().scheduleLabel,children:"End"})]}),(0,i.jsxs)("div",{className:u().schedulePickersCol,children:[(0,i.jsxs)("div",{className:u().schedulePickerRow,children:[i.jsx("input",{type:"date",value:e.date,onChange:e=>et(t,"date",e.target.value),className:u().scheduleDateInput,required:!0}),i.jsx("input",{type:"time",value:e.startTime,onChange:e=>et(t,"startTime",e.target.value),className:u().scheduleTimeInput,required:!0})]}),(0,i.jsxs)("div",{className:u().schedulePickerRow,children:[i.jsx("input",{type:"date",value:e.date,onChange:e=>et(t,"date",e.target.value),className:u().scheduleDateInput,required:!0,disabled:!0}),i.jsx("input",{type:"time",value:e.endTime,onChange:e=>et(t,"endTime",e.target.value),className:u().scheduleTimeInput,required:!0})]})]})]}),B.length>1&&i.jsx("button",{type:"button",className:u().removeDateButton,onClick:()=>ee(t),children:"Remove"})]},t)),i.jsx("button",{type:"button",className:u().addDateButton,onClick:()=>{A([...B,{date:"",startTime:"",endTime:""}])},children:"Add Another Time Slot"})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Location"}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"City"}),i.jsx("select",{value:Z,onChange:e=>J(e.target.value),className:u().citySelect,required:!0,children:g.map(e=>i.jsx("option",{value:e,children:e},e))})]}),(0,i.jsxs)("div",{className:u().formGroup,children:[i.jsx("label",{children:"Venue"}),i.jsx(m.default,{src:"https://maps.googleapis.com/maps/api/js?key=AIzaSyDjDazO71t0Deh_h6fMe_VHoKmVNEKygSM&libraries=places",strategy:"afterInteractive",onLoad:()=>F(!0)}),U?i.jsx(p.ZP,{value:M,onChange:R,onSelect:e=>{R(e),E(e),z(!1)},children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:r,loading:n}=e;return(0,i.jsxs)("div",{style:{position:"relative"},children:[i.jsx("input",{...t({placeholder:"Search location...",className:u().locationInput,required:!0,onFocus:()=>z(!0),onBlur:()=>setTimeout(()=>z(!1),150)})}),$&&a.length>0&&(0,i.jsxs)("div",{className:u().autocompleteDropdown,children:[n&&i.jsx("div",{className:u().suggestionItem,children:"Loading..."}),a.map(e=>{let t=e.active?u().suggestionItemActive:u().suggestionItem,a=e.structured_formatting?.main_text||e.description,n=e.structured_formatting?.secondary_text;return(0,s.createElement)("div",{...r(e,{className:t}),key:e.placeId,children:[i.jsx("span",{className:u().locationIcon,children:i.jsx(h.Nh4,{})}),(0,i.jsxs)("span",{children:[i.jsx("span",{className:u().suggestionMain,children:a}),n&&i.jsx("div",{className:u().suggestionSecondary,children:n})]})]})})]})]})}}):i.jsx("input",{type:"text",placeholder:"Loading Google Maps...",disabled:!0,className:u().locationInput})]})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"About Event"}),i.jsx("div",{className:u().formGroup,children:i.jsx("textarea",{value:b,onChange:e=>y(e.target.value),placeholder:"Enter event description",rows:4,required:!0})})]}),(0,i.jsxs)("div",{className:u().formSection,children:[i.jsx("h2",{children:"Event Guides"}),i.jsx("div",{className:u().guidesGrid,children:_.map(e=>(0,i.jsxs)("div",{className:u().guideRow,children:[(0,i.jsxs)("label",{className:u().guideCheckboxLabel,children:[i.jsx("input",{type:"checkbox",checked:e.id in O,onChange:()=>er(e.id)}),e.label]}),e.id in O&&i.jsx("input",{type:"text",className:u().guideInput,placeholder:e.placeholder,value:O[e.id],onChange:t=>en(e.id,t.target.value)})]},e.id))})]}),N&&i.jsx("div",{className:`${u().message} ${N.includes("success")?u().success:u().error}`,children:N}),(0,i.jsxs)("div",{className:u().formActions,children:[i.jsx("button",{type:"submit",className:u().submitButton,disabled:j,children:j?"Updating Event...":"Update Event"}),i.jsx("button",{type:"button",className:u().cancelButton,onClick:()=>t.push("/"),disabled:j,children:"Cancel"})]})]})]})})}},8591:e=>{e.exports={editEventPage:"EditEvent_editEventPage__NII7L",editEventContainer:"EditEvent_editEventContainer__7KJQZ",pageTitle:"EditEvent_pageTitle__einQw",editEventForm:"EditEvent_editEventForm__ijYxZ",formGrid:"EditEvent_formGrid__Wed67",formSection:"EditEvent_formSection__yHut4",formGroup:"EditEvent_formGroup__5TRTo",categoriesGrid:"EditEvent_categoriesGrid__uMQbO",categoryButton:"EditEvent_categoryButton___vDgN",categoryButtonActive:"EditEvent_categoryButtonActive__p84Oz",errorText:"EditEvent_errorText__lur0x",imageSection:"EditEvent_imageSection__FEQbC",imageTip:"EditEvent_imageTip__aDsyX",imageUploadBox:"EditEvent_imageUploadBox__DfUWm",imageUploadLabel:"EditEvent_imageUploadLabel__vu3QB",imagePreview:"EditEvent_imagePreview__PobwT",imagePreviewImg:"EditEvent_imagePreviewImg__MnFQx",fileInput:"EditEvent_fileInput__YZn75",formRow:"EditEvent_formRow__7PmXl",dateSlot:"EditEvent_dateSlot__lMExm",ticketSlot:"EditEvent_ticketSlot__m413p",removeDateButton:"EditEvent_removeDateButton__rno1s",addDateButton:"EditEvent_addDateButton__5mPpQ",formActions:"EditEvent_formActions__DE9_J",submitButton:"EditEvent_submitButton__5OzLZ",cancelButton:"EditEvent_cancelButton__8OEtw",message:"EditEvent_message__WabJU",success:"EditEvent_success__aSZts",error:"EditEvent_error__fE80o",loadingState:"EditEvent_loadingState__mWroD",scheduleSlotContainer:"EditEvent_scheduleSlotContainer__Rm0AN",scheduleRow:"EditEvent_scheduleRow__uKbyq",scheduleIndicatorCol:"EditEvent_scheduleIndicatorCol__XzfyB",scheduleCircleFilled:"EditEvent_scheduleCircleFilled__K7gvL",scheduleDashedLine:"EditEvent_scheduleDashedLine__353Zp",scheduleCircle:"EditEvent_scheduleCircle__MfjVN",scheduleLabelsCol:"EditEvent_scheduleLabelsCol__wLv3G",scheduleLabel:"EditEvent_scheduleLabel__HCfpk",schedulePickersCol:"EditEvent_schedulePickersCol__Yn1Ws",schedulePickerRow:"EditEvent_schedulePickerRow__NzcFo",scheduleDateInput:"EditEvent_scheduleDateInput__u_Y9f",scheduleTimeInput:"EditEvent_scheduleTimeInput__6PyQT",locationInput:"EditEvent_locationInput__Th0YD",autocompleteDropdown:"EditEvent_autocompleteDropdown__0YCFp",suggestionItem:"EditEvent_suggestionItem__KUZ__",suggestionItemActive:"EditEvent_suggestionItemActive__iPij7",suggestionMain:"EditEvent_suggestionMain__t5Owo",suggestionSecondary:"EditEvent_suggestionSecondary__gJaVo",locationIcon:"EditEvent_locationIcon__p1x_i",guidesGrid:"EditEvent_guidesGrid__4Ai3Q",guideRow:"EditEvent_guideRow__z0O4m",guideCheckboxLabel:"EditEvent_guideCheckboxLabel___r0pi",guideInput:"EditEvent_guideInput__xwo66"}},1650:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>n});let i=(0,a(86843).createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/edit-event/[id]/page.tsx`),{__esModule:s,$$typeof:r}=i,n=i.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[1638,4292,9314,4684],()=>a(88475));module.exports=i})();