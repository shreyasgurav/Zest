(()=>{var e={};e.id=191,e.ids=[191],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},72888:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var i=s(50482),a=s(69108),n=s(62563),r=s.n(n),o=s(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["book-event",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23771)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/book-event/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39258)),"/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/book-event/[id]/page.tsx"],u="/book-event/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/book-event/[id]/page",pathname:"/book-event/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68484:(e,t,s)=>{Promise.resolve().then(s.bind(s,88659))},88659:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var i=s(95344),a=s(3729),n=s(8428),r=s(81012),o=s(87097),l=s(14408),c=s(49921),d=s(69250),u=s.n(d),m=s(25399);let p=function(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),s=(0,l.v0)(),[d,p]=(0,a.useState)(1),[h,x]=(0,a.useState)(null),[g,v]=(0,a.useState)([]),[j,_]=(0,a.useState)(null),[y,k]=(0,a.useState)([]),[b,N]=(0,a.useState)([]),[f,S]=(0,a.useState)(null),[w,D]=(0,a.useState)({}),[B,I]=(0,a.useState)({name:"",email:"",phone:""}),[P,C]=(0,a.useState)(!0),[F,T]=(0,a.useState)(""),[E,q]=(0,a.useState)(!1),[A,L]=(0,a.useState)(new Date),U=(0,a.useRef)(null),O=(e,t)=>e.sessions.map(e=>{let s=e.tickets.map(s=>{let i=t.filter(t=>t.sessionId===e.sessionId&&t.ticketType===s.name).length;return{...s,available_capacity:Math.max(0,s.capacity-i)}});return{...e,tickets:s}}),$=e=>{let t=e.map(e=>new Date(e.start_time).toISOString().split("T")[0]);return Array.from(new Set(t)).sort()},z=(e,t)=>e.filter(e=>new Date(e.start_time).toISOString().split("T")[0]===t).sort((e,t)=>new Date(e.start_time).getTime()-new Date(t.start_time).getTime()),J=async()=>{if(!e?.id)return[];try{let t=(0,o.hJ)(r.db,"eventAttendees"),s=(0,o.IO)(t,(0,o.ar)("eventId","==",e.id));return(await (0,o.PL)(s)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching attendees:",e),[]}},M=async(t=!1)=>{if(e?.id)try{t?q(!0):C(!0);let[s,i]=await Promise.all([(0,o.QT)((0,o.JU)(r.db,"events",e.id)),J()]);if(s.exists()){let e=s.data();console.log("\uD83D\uDD0D Fetched event data:",{title:e.title,hasSessions:!!e.sessions,sessionsCount:e.sessions?.length||0,firstSession:e.sessions?.[0]});let t={id:s.id,title:e.title||"",about_event:e.about_event||"",event_type:e.event_type||"event",event_venue:e.event_venue||"",event_image:e.event_image||"",event_categories:e.event_categories||[],event_languages:e.event_languages||"",event_guides:e.event_guides||{},sessions:e.sessions||[],creator:e.creator||{},organizationId:e.organizationId||"",hosting_club:e.hosting_club||"",organization_username:e.organization_username||"",status:e.status||"active",createdAt:e.createdAt,updatedAt:e.updatedAt,image_upload_status:e.image_upload_status||"none"},a=O(t,i);t.sessions=a,x(t),v(i),L(new Date);let n=$(a);if(k(n),1===n.length&&!j){_(n[0]);let e=z(a,n[0]);N(e)}console.log("âœ… Event loaded:",{sessionsCount:a.length,datesCount:n.length,attendeesCount:i.length})}else T("Event not found")}catch(e){T("Error fetching event details"),console.error(e)}finally{C(!1),q(!1)}};(0,a.useEffect)(()=>{if(2===d||3===d)return U.current=setInterval(()=>{M(!0)},15e3),()=>{U.current&&clearInterval(U.current)}},[d]),(0,a.useEffect)(()=>{M();let e=()=>{document.hidden||M(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e),U.current&&clearInterval(U.current)}},[e?.id]),(0,a.useEffect)(()=>{(async()=>{if(s.currentUser)try{let e=await (0,o.QT)((0,o.JU)(r.db,"Users",s.currentUser.uid));if(e.exists()){let t=e.data();I({name:t.name||"",email:t.email||t.contactEmail||s.currentUser.email||"",phone:t.phone||""})}else I({name:"",email:s.currentUser.email||"",phone:""})}catch(e){console.error("Error fetching user details:",e),I({name:"",email:s.currentUser.email||"",phone:""})}})()},[s.currentUser]),(0,a.useEffect)(()=>{if(j&&h){let e=z(h.sessions,j);N(e),S(null),D({}),console.log("\uD83D\uDCC5 Date changed:",j,"Sessions:",e.length)}},[j,h]);let R=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),Z=e=>{console.log("\uD83D\uDCC5 Date selected:",e),_(e)},Q=e=>{console.log("\uD83C\uDFAF Session selected:",e.title,e.sessionId),S(e),D({})},H=(e,t)=>{if(!f)return;let s=f.tickets.find(t=>t.name===e);s&&D(i=>{let a=Math.max(0,(i[e]||0)+t);if(0===a){let{[e]:t,...s}=i;return s}let n=Math.min(a,s.available_capacity);return{...i,[e]:n}})},W=()=>Object.values(w).reduce((e,t)=>e+t,0),V=()=>f?f.tickets.reduce((e,t)=>e+t.price*(w[t.name]||0),0):0,X=async()=>{if(!s.currentUser){t.push("/login");return}if(e?.id&&f)try{C(!0);let i=await fetch("/api/book-event-new-architecture",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:e.id,sessionId:f.sessionId,userId:s.currentUser.uid,userInfo:B,selectedTickets:w,totalAmount:V()})}),a=await i.json();if(i.ok&&a.success)await (0,m.YN)({amount:V(),currency:"INR",receipt:`event_${e.id}_${Date.now()}`,notes:{eventId:e.id,sessionId:f.sessionId,userId:s.currentUser.uid}},{eventId:e.id,userId:s.currentUser.uid,name:B.name,email:B.email,phone:B.phone,selectedDate:j,tickets:w,totalAmount:V(),sessionId:f.sessionId},"event",e=>{t.push(`/booking-confirmation/${e}`)},s=>{console.error("Payment failed:",s),C(!1),t.push(`/payment-failed?eventId=${e.id}&error=${encodeURIComponent(s)}`)});else throw Error(a.error||"Booking failed")}catch(e){console.error("Error initiating booking:",e),T("Error initiating booking. Please try again."),C(!1)}},Y=e=>{let t=e.available_capacity/e.capacity*100;return 0===e.available_capacity?{status:"sold-out",text:"SOLD OUT",color:"#ef4444"}:t<=10?{status:"critical",text:"Almost Sold Out!",color:"#f59e0b"}:t<=25?{status:"low",text:"Limited Availability",color:"#f59e0b"}:t<=50?{status:"medium",text:"Good Availability",color:"#10b981"}:{status:"high",text:"Available",color:"#10b981"}},K=async()=>{await M(!0)};return P?i.jsx("div",{className:u().loading,children:"Loading..."}):F?i.jsx("div",{className:u().error,children:F}):h?i.jsx("div",{className:u().bookingFlow,children:(0,i.jsxs)("div",{className:u().bookingContainer,children:[(0,i.jsxs)("div",{className:`${u().bookingProgress} ${2===d?u().step2:""} ${3===d?u().step3:""}`,children:[(0,i.jsxs)("div",{className:u().stepWrapper,children:[i.jsx("div",{className:u().stepItem,children:(0,i.jsxs)("div",{className:`${u().progressStep} ${d>=1?u().active:""}`,children:[i.jsx(c.IiJ,{}),i.jsx("span",{children:"Date & Session"})]})}),i.jsx("div",{className:u().stepConnector})]}),(0,i.jsxs)("div",{className:u().stepWrapper,children:[i.jsx("div",{className:u().stepItem,children:(0,i.jsxs)("div",{className:`${u().progressStep} ${d>=2?u().active:""}`,children:[i.jsx(c.QHb,{}),i.jsx("span",{children:"Select Tickets"})]})}),i.jsx("div",{className:u().stepConnector})]}),i.jsx("div",{className:u().stepWrapper,children:i.jsx("div",{className:u().stepItem,children:(0,i.jsxs)("div",{className:`${u().progressStep} ${d>=3?u().active:""}`,children:[i.jsx(c.Xws,{}),i.jsx("span",{children:"Review & Pay"})]})})})]}),1===d&&(0,i.jsxs)("div",{className:u().bookingStep,children:[i.jsx("h2",{children:"Select Date & Session"}),i.jsx("p",{className:u().stepDescription,children:"Choose your preferred date and session for this event."}),(0,i.jsxs)("div",{className:u().dateSelector,children:[(0,i.jsxs)("h4",{children:[i.jsx(c.IiJ,{})," Available Dates"]}),i.jsx("div",{className:u().calendarContainer,children:i.jsx("div",{className:u().datesList,children:y.map((e,t)=>{let s=new Date(e),a=s.getDate(),n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][s.getDay()],r=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][s.getMonth()],o=t>0?new Date(y[t-1]):null,l=0===t||o&&o.getMonth()!==s.getMonth(),c=s.toDateString()===new Date().toDateString(),d=s<new Date;return(0,i.jsxs)("div",{className:u().dateItem,children:[l&&i.jsx("div",{className:u().monthLabel,children:r}),(0,i.jsxs)("div",{className:`${u().dateCard} ${j===e?u().selected:""} ${d?u().disabled:""}`,onClick:()=>!d&&Z(e),children:[i.jsx("div",{className:u().dateNumber,children:a}),(0,i.jsxs)("div",{className:u().dayName,children:[n,c&&i.jsx("span",{className:u().todayBadge,children:"Today"})]})]})]},e)})})})]}),j&&(0,i.jsxs)("div",{className:u().timeSelector,children:[(0,i.jsxs)("h4",{children:[i.jsx(c.qyc,{})," Available Sessions for ",R(j)]}),i.jsx("div",{className:u().sessionsGrid,children:b.map(e=>{let t=new Date(e.start_time),s=t.toDateString()===new Date().toDateString(),a=t<new Date,n=e.tickets.reduce((e,t)=>e+t.capacity,0),r=e.tickets.reduce((e,t)=>e+t.available_capacity,0),o=r/n*100;return(0,i.jsxs)("div",{className:`${u().sessionCard} ${f?.sessionId===e.sessionId?u().selected:""} ${a?u().disabled:""}`,onClick:()=>!a&&Q(e),children:[(0,i.jsxs)("div",{className:u().sessionHeader,children:[(0,i.jsxs)("div",{className:u().sessionInfo,children:[i.jsx("h3",{children:e.title}),(0,i.jsxs)("p",{className:u().sessionTime,children:[i.jsx(c.qyc,{})," ",G(e.start_time)," - ",G(e.end_time)]}),(0,i.jsxs)("p",{className:u().sessionVenue,children:[i.jsx(c.Nh4,{})," ",h.event_venue]}),a&&i.jsx("span",{className:u().pastBadge,children:"Past"}),s&&i.jsx("span",{className:u().todayBadge,children:"Today"})]}),(0,i.jsxs)("div",{className:u().sessionStats,children:[(0,i.jsxs)("div",{className:u().statItem,children:[i.jsx(c.I$,{}),(0,i.jsxs)("span",{children:[n-r,"/",n]})]}),(0,i.jsxs)("div",{className:u().statItem,children:[i.jsx(c.l80,{}),(0,i.jsxs)("span",{children:["â‚¹",e.tickets[0]?.price||0,"+"]})]})]})]}),(0,i.jsxs)("div",{className:u().sessionProgress,children:[i.jsx("div",{className:u().progressBar,children:i.jsx("div",{className:u().progressFill,style:{width:`${100-o}%`,backgroundColor:o>50?"#10b981":o>25?"#f59e0b":"#ef4444"}})}),(0,i.jsxs)("span",{className:u().availabilityText,children:[Math.round(o),"% available"]})]}),(0,i.jsxs)("div",{className:u().sessionTickets,children:[i.jsx("h5",{children:"Tickets Available:"}),i.jsx("div",{className:u().ticketsList,children:e.tickets.map((e,t)=>(0,i.jsxs)("div",{className:u().ticketItem,children:[i.jsx("span",{className:u().ticketName,children:e.name}),(0,i.jsxs)("span",{className:u().ticketPrice,children:["â‚¹",e.price]}),(0,i.jsxs)("span",{className:u().ticketAvailability,children:[e.available_capacity,"/",e.capacity]})]},t))})]})]},e.sessionId)})})]}),(0,i.jsxs)("button",{className:u().nextButton,onClick:()=>p(2),disabled:!f,children:[i.jsx("span",{children:"Continue to Tickets"}),i.jsx(c.Dli,{})]})]}),2===d&&f&&(0,i.jsxs)("div",{className:u().bookingStep,children:[(0,i.jsxs)("div",{className:u().stepHeader,children:[i.jsx("h2",{children:"Select Tickets"}),(0,i.jsxs)("div",{className:u().selectedSessionInfo,children:[i.jsx("h4",{children:f.title}),(0,i.jsxs)("p",{children:[j&&R(j)," â€¢ ",G(f.start_time)," - ",G(f.end_time)]})]}),(0,i.jsxs)("div",{className:u().refreshSection,children:[(0,i.jsxs)("button",{onClick:K,className:u().refreshButton,disabled:E,children:[i.jsx(c.lbL,{className:E?u().spinning:""}),E?"Updating...":"Refresh"]}),(0,i.jsxs)("span",{className:u().lastUpdate,children:["Last updated: ",A.toLocaleTimeString()]})]})]}),i.jsx("div",{className:u().ticketTypes,children:f.tickets.map((e,t)=>{let s=e.available_capacity<=0,a=Y(e),n=w[e.name]||0;return(0,i.jsxs)("div",{className:`${u().ticketType} ${s?u().soldOut:""}`,children:[(0,i.jsxs)("div",{className:u().ticketDetails,children:[(0,i.jsxs)("div",{className:u().ticketHeader,children:[i.jsx("h3",{children:e.name}),i.jsx("div",{className:u().availabilityBadge,style:{backgroundColor:a.color},children:a.text})]}),(0,i.jsxs)("p",{className:u().ticketPrice,children:["â‚¹",e.price.toLocaleString()]}),(0,i.jsxs)("div",{className:u().availabilityInfo,children:[i.jsx("div",{className:u().availabilityText,children:s?(0,i.jsxs)("span",{className:u().soldOutText,children:[i.jsx(c.gJy,{})," SOLD OUT"]}):(0,i.jsxs)("span",{className:u().ticketsLeft,children:[i.jsx(c.QHb,{})," ",e.available_capacity," of ",e.capacity," available"]})}),!s&&i.jsx("div",{className:u().progressBar,children:i.jsx("div",{className:u().progressFill,style:{width:`${(e.capacity-e.available_capacity)/e.capacity*100}%`,backgroundColor:a.color}})})]})]}),(0,i.jsxs)("div",{className:u().ticketQuantity,children:[i.jsx("button",{onClick:()=>H(e.name,-1),className:u().quantityButton,disabled:!n||s,children:"-"}),i.jsx("span",{children:n}),i.jsx("button",{onClick:()=>H(e.name,1),className:u().quantityButton,disabled:s||n>=e.available_capacity,children:"+"})]})]},t)})}),W()>0&&(0,i.jsxs)("div",{className:u().selectionSummary,children:[i.jsx("h4",{children:"Selected Tickets"}),i.jsx("div",{className:u().selectedTicketsList,children:Object.entries(w).map(([e,t])=>{let s=f.tickets.find(t=>t.name===e);return(0,i.jsxs)("div",{className:u().selectedTicketItem,children:[(0,i.jsxs)("span",{children:[e," \xd7 ",t]}),(0,i.jsxs)("span",{children:["â‚¹",((s?.price||0)*t).toLocaleString()]})]},e)})}),i.jsx("div",{className:u().totalSelected,children:(0,i.jsxs)("strong",{children:["Total: â‚¹",V().toLocaleString()]})})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem"},children:[i.jsx("button",{className:u().backButton,onClick:()=>p(1),children:i.jsx("span",{children:"Back to Date & Session"})}),(0,i.jsxs)("button",{className:u().nextButton,onClick:()=>p(3),disabled:0===W(),children:[i.jsx("span",{children:"Continue to Review"}),i.jsx(c.Dli,{})]})]})]}),3===d&&f&&(0,i.jsxs)("div",{className:u().bookingStep,children:[i.jsx("h2",{children:"Booking Summary"}),(0,i.jsxs)("div",{className:u().bookingSummary,children:[(0,i.jsxs)("div",{className:u().eventSummary,children:[h.event_image&&i.jsx("img",{src:h.event_image,alt:h.title}),(0,i.jsxs)("div",{className:u().eventDetails,children:[i.jsx("h3",{children:h.title}),(0,i.jsxs)("p",{children:[i.jsx(c.QJe,{})," ",f.title]}),(0,i.jsxs)("p",{children:[i.jsx(c.IiJ,{})," ",j&&R(j)]}),(0,i.jsxs)("p",{children:[i.jsx(c.qyc,{})," ",G(f.start_time)," - ",G(f.end_time)]}),(0,i.jsxs)("p",{children:[i.jsx(c.Nh4,{})," ",h.event_venue]})]})]}),(0,i.jsxs)("div",{className:u().ticketInfo,children:[(0,i.jsxs)("h3",{children:[i.jsx(c.QHb,{})," Ticket Information"]}),Object.entries(w).map(([e,t])=>{let s=f.tickets.find(t=>t.name===e);return(0,i.jsxs)("div",{className:u().ticketSummary,children:[(0,i.jsxs)("p",{children:[e,": ",t," tickets"]}),(0,i.jsxs)("p",{children:["â‚¹",((s?.price||0)*t).toLocaleString()]})]},e)}),i.jsx("div",{className:u().totalAmount,children:(0,i.jsxs)("h3",{children:["Total Amount: â‚¹",V().toLocaleString()]})})]}),(0,i.jsxs)("div",{className:u().userInfo,children:[(0,i.jsxs)("h3",{children:[i.jsx(c.Xws,{})," Attendee Information"]}),(0,i.jsxs)("div",{className:u().userDetails,children:[(0,i.jsxs)("div",{className:u().userField,children:[i.jsx("label",{children:"Name:"}),i.jsx("input",{type:"text",value:B.name,onChange:e=>I(t=>({...t,name:e.target.value})),placeholder:"Enter your name",required:!0})]}),(0,i.jsxs)("div",{className:u().userField,children:[i.jsx("label",{children:"Email:"}),i.jsx("input",{type:"email",value:B.email,onChange:e=>I(t=>({...t,email:e.target.value})),placeholder:"Enter your email",required:!0})]}),(0,i.jsxs)("div",{className:u().userField,children:[i.jsx("label",{children:"Phone:"}),i.jsx("input",{type:"tel",value:B.phone,onChange:e=>I(t=>({...t,phone:e.target.value})),placeholder:"Enter your phone number",required:!0})]})]}),(!B.name||!B.email||!B.phone)&&(0,i.jsxs)("div",{className:u().missingInfoWarning,children:[i.jsx(c.gJy,{}),"Please fill in all required fields before proceeding with payment."]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem"},children:[i.jsx("button",{className:u().backButton,onClick:()=>p(2),children:i.jsx("span",{children:"Back to Tickets"})}),i.jsx("button",{className:u().nextButton,onClick:X,disabled:P||!B.name||!B.email||!B.phone,children:P?"Processing Payment...":B.name&&B.email&&B.phone?(0,i.jsxs)(i.Fragment,{children:[i.jsx(c.ypE,{}),(0,i.jsxs)("span",{children:["Pay â‚¹",V().toLocaleString()]}),i.jsx(c.Dli,{})]}):"Please Complete All Fields"})]})]}),F&&i.jsx("div",{className:u().error,children:F})]})}):i.jsx("div",{className:u().error,children:"Event not found"})}},25399:(e,t,s)=>{"use strict";s.d(t,{YN:()=>r});let i=()=>new Promise(e=>{let t=document.createElement("script");t.src="https://checkout.razorpay.com/v1/checkout.js",t.onload=()=>e(!0),t.onerror=()=>e(!1),document.body.appendChild(t)}),a=async e=>{try{let t=await fetch("/api/payment/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to create order");return s.order}catch(e){throw console.error("Error creating Razorpay order:",e),e}},n=async(e,t,s)=>{try{let i=await fetch("/api/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,bookingData:t,bookingType:s})}),a=await i.json();if(!i.ok)throw Error(a.error||"Payment verification failed");return a}catch(e){throw console.error("Error verifying payment:",e),e}},r=async(e,t,s,r,o)=>{try{if(!await i())throw Error("Failed to load Razorpay script");let l=await a(e),c={key:process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:l.amount,currency:l.currency,name:"Zest",description:"event"===s?"Event Booking":"Activity Booking",order_id:l.id,handler:async e=>{try{let i=await n(e,t,s);r(i.bookingId)}catch(e){console.error("Payment verification failed:",e),o(e instanceof Error?e.message:"Payment verification failed")}},prefill:{name:t.name,email:t.email,contact:t.phone},theme:{color:"#c084fc"},modal:{ondismiss:()=>{o("Payment cancelled by user")}}};new window.Razorpay(c).open()}catch(e){console.error("Error initiating payment:",e),o(e instanceof Error?e.message:"Failed to initiate payment")}}},69250:e=>{e.exports={bookingFlow:"BookingFlow_bookingFlow__VCJ_z",bookingContainer:"BookingFlow_bookingContainer__nTpHh",bookingProgress:"BookingFlow_bookingProgress__f_RiN",progressStep:"BookingFlow_progressStep__pnllZ",active:"BookingFlow_active__NelrZ",bookingStep:"BookingFlow_bookingStep__fFGXr",dateSelector:"BookingFlow_dateSelector__PyhFc",timeSelector:"BookingFlow_timeSelector__haPZS",availableDates:"BookingFlow_availableDates__b5CE9",dateOption:"BookingFlow_dateOption__YGZ60",selected:"BookingFlow_selected__e9ErM",availableSlots:"BookingFlow_availableSlots__w2yit",slotOption:"BookingFlow_slotOption__n3Iea",ticketTypes:"BookingFlow_ticketTypes__e5KgJ",ticketType:"BookingFlow_ticketType___DgVX",ticketDetails:"BookingFlow_ticketDetails__L_ZxH",ticketPrice:"BookingFlow_ticketPrice__2pQmp",ticketsLeft:"BookingFlow_ticketsLeft__GPbfS",ticketQuantity:"BookingFlow_ticketQuantity__npnja",quantityButton:"BookingFlow_quantityButton__V6Wpd",bookingSummary:"BookingFlow_bookingSummary__nKyHd",eventSummary:"BookingFlow_eventSummary__gZxo6",eventDetails:"BookingFlow_eventDetails__BcqGG",ticketInfo:"BookingFlow_ticketInfo__IUxWn",userInfo:"BookingFlow_userInfo__DNAzV",ticketSummary:"BookingFlow_ticketSummary__L7dsv",totalAmount:"BookingFlow_totalAmount__onk2h",nextButton:"BookingFlow_nextButton__AGmsq",bookButton:"BookingFlow_bookButton__A8s2M",error:"BookingFlow_error___AmZL",loading:"BookingFlow_loading__NiUbw"}},23771:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>r});let i=(0,s(86843).createProxy)(String.raw`/Users/shreyasgurav/Documents/Projects/Zest Deployed/src/app/book-event/[id]/page.tsx`),{__esModule:a,$$typeof:n}=i,r=i.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[1638,4292,4684],()=>s(72888));module.exports=i})();